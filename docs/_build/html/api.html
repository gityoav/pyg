
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API &#8212; pyg 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Welcome to pyg’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="extensions-to-dict">
<h2>Extensions to dict<a class="headerlink" href="#extensions-to-dict" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dictattr">
<h3>dictattr<a class="headerlink" href="#dictattr" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dictattr.dictattr">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dictattr.</code><code class="sig-name descname">dictattr</code><a class="headerlink" href="#pyg.base._dictattr.dictattr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>A simple dict with extended member manipulation</dt><dd><ol class="arabic simple">
<li><p>access using d.key</p></li>
<li><p>access multiple elements using d[key1, key2]</p></li>
</ol>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;a&#39;</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition, it has extended key selection/subsetting</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;a&#39;</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>dictattr supports not in-place ‘update’:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of D<a class="headerlink" href="#pyg.base._dictattr.dictattr.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.keys">
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr returns an actual list rather than a generator. 
Further, this recognises that the keys are necessarily unique so it returns a ulist which is also a set</p>
<dl class="simple">
<dt>ulist</dt><dd><p>list of keys of dictattr.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">ulist</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.relabel">
<code class="sig-name descname">relabel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">relabels</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.relabel" title="Permalink to this definition">¶</a></dt>
<dd><p>easy relabel/rename of keys</p>
<dl class="simple">
<dt><a href="#id1"><span class="problematic" id="id2">*</span></a>args<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">**</span></a>relabels<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>dictattr</dt><dd><p>new dict with renamed keys.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="s1">&#39;x_&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">x_a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x_b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x_c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># prefixing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="s1">&#39;_x&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a_x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b_x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c_x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># suffixing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">upper</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="n">upper</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.rename">
<code class="sig-name descname">rename</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">relabels</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>easy relabel/rename of keys</p>
<dl class="simple">
<dt><a href="#id5"><span class="problematic" id="id6">*</span></a>args<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt><a href="#id7"><span class="problematic" id="id8">**</span></a>relabels<span class="classifier">TYPE</span></dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="simple">
<dt>dictattr</dt><dd><p>new dict with renamed keys.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="s1">&#39;x_&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">x_a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">x_b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">x_c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># prefixing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="s1">&#39;_x&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a_x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b_x</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c_x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># suffixing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">upper</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;A&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">A</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">rename</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">relabel</span><span class="p">(</span><span class="n">upper</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.values">
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; an object providing a view on D’s values<a class="headerlink" href="#pyg.base._dictattr.dictattr.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__add__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__add__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr uses add as a copy + update. Similar to the latest python <a href="#id9"><span class="problematic" id="id10">|</span></a>=</p>
<p>updated dictattr</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__sub__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__sub__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr uses subtraction to remove key(s)</p>
<p>updated dictattr</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#commutative</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__and__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__and__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__and__" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr uses &amp; as a set operator for key filtering</p>
<p>updated dictattr</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;not_there&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#commutative</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="dict">
<h3>Dict<a class="headerlink" href="#dict" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dict.Dict">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dict.</code><code class="sig-name descname">Dict</code><a class="headerlink" href="#pyg.base._dict.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict extends dictattr to allow access to <em>functions</em> of memebers</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>Dict is also callable where the key-value is used to add/update current members</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">Dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)(</span><span class="n">b</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)(</span><span class="n">c</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._dict.Dict.do">
<code class="sig-name descname">do</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.Dict.do" title="Permalink to this definition">¶</a></dt>
<dd><p>applies a function(s) on multiple keys at the same time</p>
<dl class="simple">
<dt>function<span class="classifier">callable or list of callables</span></dt><dd><p>function to be applied per column</p>
</dd>
<dt><a href="#id11"><span class="problematic" id="id12">*</span></a>keys<span class="classifier">string/list of strings</span></dt><dd><p>list of columns to be applied. If missing, applied to all columns</p>
</dd>
</dl>
<p>res : Dict</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;adam&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;atkins&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">proper</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;Atkins&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">denominator</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">value</span><span class="o">/</span><span class="n">denominator</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">denominator</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dict.Dict.__call__">
<code class="sig-prename descclassname">pyg.base._dict.Dict.</code><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.Dict.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</div>
<div class="section" id="dictable">
<h3>dictable<a class="headerlink" href="#dictable" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dictable.dictable">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dictable.</code><code class="sig-name descname">dictable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">columns</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="pyg.base._dictable.dictable.concat">
<em class="property">classmethod </em><code class="sig-name descname">concat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">others</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.concat" title="Permalink to this definition">¶</a></dt>
<dd><p>adds together multiple dictables. equivalent to sum(others, self) but a little faster</p>
<dl class="simple">
<dt><a href="#id13"><span class="problematic" id="id14">*</span></a>others<span class="classifier">dictables</span></dt><dd><p>records to be added to current table</p>
</dd>
</dl>
<dl class="simple">
<dt>merged<span class="classifier">dictable</span></dt><dd><p>sum of all records</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d3</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dictable</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">d3</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dictable</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">d3</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.do">
<code class="sig-name descname">do</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.do" title="Permalink to this definition">¶</a></dt>
<dd><p>applies a function(s) on multiple keys at the same time</p>
<dl class="simple">
<dt>function<span class="classifier">callable or list of callables</span></dt><dd><p>function to be applied per column</p>
</dd>
<dt><a href="#id15"><span class="problematic" id="id16">*</span></a>keys<span class="classifier">string/list of strings</span></dt><dd><p>list of columns to be applied. If missing, applied to all columns</p>
</dd>
</dl>
<p>res : dictable</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;adam&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">proper</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;Chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;Brown&#39;</span><span class="p">,</span> <span class="s1">&#39;Cohen&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">denominator</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">value</span><span class="o">/</span><span class="n">denominator</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span> <span class="n">denominator</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.exc">
<code class="sig-name descname">exc</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">functions</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">filters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.exc" title="Permalink to this definition">¶</a></dt>
<dd><p>performs a filter on what rows to exclude</p>
<dl class="simple">
<dt><a href="#id17"><span class="problematic" id="id18">*</span></a>functions<span class="classifier">callables or a dict</span></dt><dd><p>filters based on functions of each row</p>
</dd>
<dt><a href="#id19"><span class="problematic" id="id20">**</span></a>filters<span class="classifier">value or list of values</span></dt><dd><p>filters per each column</p>
</dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>table with rows that satisfy all conditions excluded.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>         
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> 
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value for key if key is in the dictionary, else default.</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.groupby">
<code class="sig-name descname">groupby</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">by</span></em>, <em class="sig-param"><span class="n">grp</span><span class="o">=</span><span class="default_value">'grp'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to pandas groupby but returns a dictable of dictables with a new column ‘grp’</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_dictable</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grp</span><span class="p">)</span> <span class="ow">and</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grp</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p><a href="#id21"><span class="problematic" id="id22">*</span></a>by : str or list of strings</p>
<blockquote>
<div><p>gr.</p>
</div></blockquote>
<dl class="simple">
<dt>grp<span class="classifier">str, optional</span></dt><dd><p>The name of the column for the dictables per each key. The default is ‘grp’.</p>
</dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>A dictable containing the original keys and a dictable per unique key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.inc">
<code class="sig-name descname">inc</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">functions</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">filters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.inc" title="Permalink to this definition">¶</a></dt>
<dd><p>performs a filter on what rows to include</p>
<dl class="simple">
<dt><a href="#id23"><span class="problematic" id="id24">*</span></a>functions<span class="classifier">callables or a dict</span></dt><dd><p>filters based on functions of each row</p>
</dd>
<dt><a href="#id25"><span class="problematic" id="id26">**</span></a>filters<span class="classifier">value or list of values</span></dt><dd><p>filters per each column</p>
</dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>table with rows that satisfy all conditions.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>            
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>            
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> 
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.join">
<code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">lcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs either an inner join or a cross join between two dictables</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.pivot">
<code class="sig-name descname">pivot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">agg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.pivot" title="Permalink to this definition">¶</a></dt>
<dd><p>pivot table functionality.</p>
<dl class="simple">
<dt>x<span class="classifier">str/list of str</span></dt><dd><p>unique keys per each row</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>unique key per each column</p>
</dd>
<dt>z<span class="classifier">str/callable</span></dt><dd><p>A column in the table or an evaluated quantity per each row</p>
</dd>
<dt>agg<span class="classifier">None/callable or list of callables, optional</span></dt><dd><p>Each (x,y) cell can potentially contain multiple z values. so if agg = None, a list is returned
If you want the data aggregated in any way, then supply an aggregating function(s)</p>
</dd>
</dl>
<p>A dictable which is a pivot table of the original data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable_as_list</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable</span> <span class="o">=</span> <span class="n">timetable_as_list</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">timetable</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">)</span>
</pre></div>
</div>
<p>self = dictable(a = [‘a,b’,’c’]) 
other = dictable(b = [‘x’,’y’,’z’])</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">by</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the table either using a key, list of keys or functions of members</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="s1">&#39;abracadabra&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="n">c</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">%</span> <span class="mi">11</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;aaaaabbcdrr&#39;</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">b</span><span class="o">*</span><span class="mi">3</span> <span class="o">%</span> <span class="mi">11</span><span class="p">)</span> <span class="c1">## sorting again by c but using a function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.ungroup">
<code class="sig-name descname">ungroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grp</span><span class="o">=</span><span class="default_value">'grp'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.ungroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Undoes groupby</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>grp<span class="classifier">str, optional</span></dt><dd><p>column name where dictables are. The default is ‘grp’.</p>
</dd>
</dl>
<p>dictable.</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.unlist">
<code class="sig-name descname">unlist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.unlist" title="Permalink to this definition">¶</a></dt>
<dd><p>undoes listby…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>dictable[2 x 2]
b|a     
0|[2, 4]
1|[1, 3]</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">x</span>
</pre></div>
</div>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable where all rows with list in them have been ‘expanded’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.unpivot">
<code class="sig-name descname">unpivot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.unpivot" title="Permalink to this definition">¶</a></dt>
<dd><p>undoes self.xyz / self.pivot</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orig</span> <span class="o">=</span> <span class="p">(</span><span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">*</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]))(</span><span class="n">z</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pivot</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpivot</span> <span class="o">=</span> <span class="n">pivot</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span> <span class="c1"># the conversion to column names mean y is now string... so we convert back to int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">orig</span> <span class="o">==</span> <span class="n">unpivot</span>
</pre></div>
</div>
<dl class="simple">
<dt>x<span class="classifier">str/list of strings</span></dt><dd><p>list of keys in the pivot table.</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>name of the columns that wil be used for the values that are currently column headers.</p>
</dd>
<dt>z<span class="classifier">str</span></dt><dd><p>name of the column that describes the data currently within the pivot table.</p>
</dd>
</dl>
<p>dictable</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">E</em>, <span class="optional">]</span><em class="sig-param">**F</em><span class="sig-paren">)</span> &#x2192; None.  Update D from dict/iterable E and F.<a class="headerlink" href="#pyg.base._dictable.dictable.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]
If E is present and lacks a .keys() method, then does:  for k, v in E: D[k] = v
In either case, this is followed by: for k in F:  D[k] = F[k]</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.xor">
<code class="sig-name descname">xor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">lcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'l'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.xor" title="Permalink to this definition">¶</a></dt>
<dd><p>returns what is in lhs but NOT in rhs (or vice versa if mode = ‘r’). Together with inner joining, can be used as left/right join</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lhs</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rhs</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lhs</span><span class="o">.</span><span class="n">xor</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="c1"># this is in lhs but not in rhs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lhs</span><span class="o">.</span><span class="n">xor</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="n">lcols</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rcols</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># fit can be done using formulae rather than actual columns</span>
</pre></div>
</div>
<p>The XOR functionality can be performed using quotient (divide):
&gt;&gt;&gt; assert lhs/rhs == dictable(a = 4)
&gt;&gt;&gt; assert rhs/lhs == dictable(a = 5)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rhs</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">left_join_can_be_done_simply_as</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">*</span> <span class="n">rhs</span> <span class="o">+</span> <span class="n">lhs</span><span class="o">/</span><span class="n">rhs</span>
</pre></div>
</div>
<dl class="simple">
<dt>other<span class="classifier">dictable (or something that can be turned to one)</span></dt><dd><p>what we exclude with.</p>
</dd>
<dt>lcols<span class="classifier">str/list of strs, optional</span></dt><dd><p>the left columns/formulae on which we match. The default is None.</p>
</dd>
<dt>rcols<span class="classifier">str/list of strs, optional</span></dt><dd><p>the right columns/formulae on which we match. The default is None.</p>
</dd>
<dt>mode<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is ‘l’.</p>
</dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable containing what is in self but not in ther other dictable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.xyz">
<code class="sig-name descname">xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">agg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>pivot table functionality.</p>
<dl class="simple">
<dt>x<span class="classifier">str/list of str</span></dt><dd><p>unique keys per each row</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>unique key per each column</p>
</dd>
<dt>z<span class="classifier">str/callable</span></dt><dd><p>A column in the table or an evaluated quantity per each row</p>
</dd>
<dt>agg<span class="classifier">None/callable or list of callables, optional</span></dt><dd><p>Each (x,y) cell can potentially contain multiple z values. so if agg = None, a list is returned
If you want the data aggregated in any way, then supply an aggregating function(s)</p>
</dd>
</dl>
<p>A dictable which is a pivot table of the original data</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable_as_list</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable</span> <span class="o">=</span> <span class="n">timetable_as_list</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">timetable</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">)</span>
</pre></div>
</div>
<p>self = dictable(a = [‘a,b’,’c’]) 
other = dictable(b = [‘x’,’y’,’z’])</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictable.dictable.__call__">
<code class="sig-prename descclassname">pyg.base._dictable.dictable.</code><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</div>
<div class="section" id="perdictable">
<h3>perdictable<a class="headerlink" href="#perdictable" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._perdictable.perdictable">
<code class="sig-prename descclassname">pyg.base._perdictable.</code><code class="sig-name descname">perdictable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._perdictable.perdictable" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that makes a function works per dictable and not just on original value</p>
<p>If (a) data is provided AND (b) there is an expiry column, then we will not re-calculate columns with data that have expired</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">perdictable</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>     
</pre></div>
</div>
<p>The new modified function p now works the same on old values:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="n">f</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p># some parameters are constant, some are tables…
&gt;&gt;&gt; assert p(a = 1, b = dictable(key = [‘a’,’b’,’c’], b = [1,2,3])) == dictable(key  = [‘a’, ‘b’, ‘c’], data = [2,3,4])</p>
<p># multiple tables… some unkeyed
&gt;&gt;&gt; assert p(a = dictable(a = [1,2]), b = dictable(key = [‘a’,’b’,’c’], b = [1,2,3])) == dictable(key  = [‘a’,’a’, ‘b’, ‘b’, ‘c’,’c’], data = [2,3,3,4,4,5])</p>
<p># multiple tables… all keyed
&gt;&gt;&gt; a = dictable(key = [‘x’, ‘y’], data = [1,2])
&gt;&gt;&gt; b = dictable(key = [‘y’, ‘z’], data = [3,4])
&gt;&gt;&gt; assert p(a = a, b = b) == dictable(key  = [‘y’], data = [5])</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;we calculated this before&#39;</span><span class="p">,</span> <span class="s1">&#39;we calculated before but hasnt expired&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiry</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">expiry</span> <span class="o">=</span> <span class="n">expiry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">find_data</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s1">&#39;we calculated this before&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">find_data</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">5</span>  <span class="c1"># although calculated before, we recalculate as its expiry is in the future</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="join">
<h3>join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._perdictable.join">
<code class="sig-prename descclassname">pyg.base._perdictable.</code><code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inputs</span></em>, <em class="sig-param"><span class="n">on</span></em>, <em class="sig-param"><span class="n">rename</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">defaults</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._perdictable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Suppose we have a function which is defined on simple numbers</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">amount</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">amount</span>  <span class="o">*</span> <span class="n">price</span>    
</pre></div>
</div>
<p>The amounts sold are available in one table and prices in another</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amounts</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">product</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;pear&#39;</span><span class="p">],</span> <span class="n">amount</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prices</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">product</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;pear&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">],</span> <span class="n">price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amounts</span><span class="p">,</span> <span class="n">price</span> <span class="o">=</span> <span class="n">prices</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;product&#39;</span><span class="p">)</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dictable</span><span class="p">[</span><span class="mi">3</span> <span class="n">x</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dictable</span><span class="p">[</span><span class="mi">3</span> <span class="n">x</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">product</span><span class="o">|</span><span class="n">amount</span><span class="o">|</span><span class="n">price</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apple</span>  <span class="o">|</span><span class="mi">1</span>     <span class="o">|</span><span class="mi">4</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">orange</span> <span class="o">|</span><span class="mi">2</span>     <span class="o">|</span><span class="mi">5</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">pear</span>   <span class="o">|</span><span class="mi">3</span>     <span class="o">|</span><span class="mi">6</span>    
</pre></div>
</div>
<p>we can then apply profit…
Example
——-
&gt;&gt;&gt; join(dict(amount = amounts, price = prices), on = ‘product’)(profit = profit)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dictable</span><span class="p">[</span><span class="mi">3</span> <span class="n">x</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">product</span><span class="o">|</span><span class="n">amount</span><span class="o">|</span><span class="n">price</span><span class="o">|</span><span class="n">profit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apple</span>  <span class="o">|</span><span class="mi">1</span>     <span class="o">|</span><span class="mi">4</span>    <span class="o">|</span><span class="mi">4</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="n">orange</span> <span class="o">|</span><span class="mi">2</span>     <span class="o">|</span><span class="mi">5</span>    <span class="o">|</span><span class="mi">10</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">pear</span>   <span class="o">|</span><span class="mi">3</span>     <span class="o">|</span><span class="mi">6</span>    <span class="o">|</span><span class="mi">18</span>    
</pre></div>
</div>
<dl class="simple">
<dt>inputs<span class="classifier">dict</span></dt><dd><p>a dict of input parameters, some of them may be dictables.</p>
</dd>
<dt>on<span class="classifier">str/list of str</span></dt><dd><p>when we have dictables</p>
</dd>
<dt>rename<span class="classifier">dict, optional</span></dt><dd><p>remapping. if the datasets contain multiple column, you can say rename = dict(price = ‘price_in_dollar’) to tell the algo, this is the column to use
The default is None.</p>
</dd>
<dt>defaults<span class="classifier">dict, optional</span></dt><dd><p>Normally, an inner join is performed. However, if there is a default value/formula for when e.g. a price is missing, use this. The default is None.</p>
</dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable of an inner join.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;key&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">dict</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">)))</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="named-dict">
<h3>named_dict<a class="headerlink" href="#named-dict" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._named_dict.named_dict">
<code class="sig-prename descclassname">pyg.base._named_dict.</code><code class="sig-name descname">named_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">defaults</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">types</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">casts</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">basedict</span><span class="o">=</span><span class="default_value">'pyg.base.dictattr'</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._named_dict.named_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to named_tuple but supports additional features such as casting/type checking</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;today&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;today&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;today&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">types</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;datetime.datetime&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">types</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;datetime.datetime&#39;</span><span class="p">),</span> <span class="n">casts</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="s1">&#39;float&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="n">balance</span> <span class="o">=</span> <span class="s1">&#39;10.3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">10.3</span>
</pre></div>
</div>
<dl class="simple">
<dt>name<span class="classifier">str</span></dt><dd><p>name of new class.</p>
</dd>
<dt>keys<span class="classifier">list</span></dt><dd><p>list of keys that the class must have as members.</p>
</dd>
<dt>defaults<span class="classifier">dict, optional</span></dt><dd><p>default values for the keys. The default is {}.</p>
</dd>
<dt>types<span class="classifier">type or callable, optional</span></dt><dd><p>A test to be applied for keys either as a callable or as a type. The default is {}.</p>
</dd>
<dt>casts<span class="classifier">dict, optional</span></dt><dd><p>function. The default is {}.</p>
</dd>
<dt>basedict<span class="classifier">str, optional</span></dt><dd><p>name of the dict class to inherit from. The default is ‘dict’.</p>
</dd>
<dt>debug<span class="classifier">bool, optional</span></dt><dd><p>output the construction text if set to True. The default is False.</p>
</dd>
</dl>
<dl class="simple">
<dt>ValueError</dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<p>result : new class that inherits from a dict</p>
</dd></dl>

</div>
</div>
<div class="section" id="decorators">
<h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wrapper">
<h3>Wrapper<a class="headerlink" href="#wrapper" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._decorators.wrapper">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic wrapper for decorators.</p>
<p>The action of the function is defined via ‘wrapped’ method. Otherthan that, you don’t need to do much.</p>
<dl class="simple">
<dt>class and_add(wrapper):</dt><dd><dl class="simple">
<dt>def wrapped(self, <a href="#id27"><span class="problematic" id="id28">*</span></a>args, <a href="#id29"><span class="problematic" id="id30">**</span></a>kwargs):</dt><dd><p>return self.function(<a href="#id31"><span class="problematic" id="id32">*</span></a>args, <a href="#id33"><span class="problematic" id="id34">**</span></a>kwargs) + self.add</p>
</dd>
</dl>
</dd>
</dl>
<p>&#64;and_add(add = 3)
def f(a,b):</p>
<blockquote>
<div><p>return a+b</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">[</span><span class="s1">&#39;add&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">f</span><span class="o">.</span><span class="n">add</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
<p>You can make the init more explict, also adding defaults for the parameters:</p>
<dl class="simple">
<dt>class and_add_version_2(wrapper):</dt><dd><dl class="simple">
<dt>def __init__(self, function = None, add = 3):</dt><dd><p>super(and_add, self).__init__(function = function, add = add)</p>
</dd>
<dt>def wrapped(self, <a href="#id35"><span class="problematic" id="id36">*</span></a>args, <a href="#id37"><span class="problematic" id="id38">**</span></a>kwargs):</dt><dd><p>return self.function(<a href="#id39"><span class="problematic" id="id40">*</span></a>args, <a href="#id41"><span class="problematic" id="id42">**</span></a>kwargs) + self.add</p>
</dd>
</dl>
</dd>
</dl>
<p>&#64;and_add_version_2
def f(a,b):</p>
<blockquote>
<div><p>return a+b</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
<p>The decorator is designed to have a single instance of a specific wrapper</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">and_add_version_2</span><span class="p">(</span><span class="n">and_add_version_2</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">==</span> <span class="n">and_add_version_2</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>This holds even for multiple levels of wrapping:
&gt;&gt;&gt; x = try_none(and_add_version_2(f))
&gt;&gt;&gt; y = try_none(and_add_version_2(x))
&gt;&gt;&gt; assert x == y        
&gt;&gt;&gt; assert x(1, ‘no can add’) is None</p>
<p>Need to define a wrapped method</p>
</dd></dl>

</div>
<div class="section" id="timer">
<h3>timer<a class="headerlink" href="#timer" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._decorators.timer">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">time</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.timer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="try-none">
<h3>try_none<a class="headerlink" href="#try-none" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._decorators.try_none">
<code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">try_none</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.try_none" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps a function to try an evaluation. If an exception is thrown, returns a cached argument</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_none</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_none</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;failed&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="try-back">
<h3>try_back<a class="headerlink" href="#try-back" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._decorators.try_back">
<code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">try_back</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.try_back" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps a function to try an evaluation. If an exception is thrown, return first argument</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_back</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span> <span class="ow">and</span> <span class="n">try_back</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="loops">
<h3>loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._loop.loops">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._loop.</code><code class="sig-name descname">loops</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">types</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._loop.loops" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a function to loop over the arguments, depending on the type of the first argument</p>
<p>&#64;loop(dict, list, pd.DataFrame, pd.Series)
def f(a,b):</p>
<blockquote>
<div><p>return a+b</p>
</div></blockquote>
<p>assert f(1,2) == 3
assert f([1,2,3],2) == [3,4,5]
assert f([1,2,3], [4,5,6]) == [5,7,9]</p>
<p>assert f(dict(x=1,y=2), 3) == dict(x = 4, y = 5)
assert f(dict(x=1,y=2), dict(x = 3, y = 4)) == dict(x = 4, y = 6)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">6</span><span class="p">)))</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]));</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span>  <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">res</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]));</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span>  <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">res</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>    
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="loop">
<h3>loop<a class="headerlink" href="#loop" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._loop.loop">
<code class="sig-prename descclassname">pyg.base._loop.</code><code class="sig-name descname">loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">types</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._loop.loop" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>loop_all is an instance of loops that loops over dict, list, tuple, np.ndarray and pandas.DataFrame/Series</p>
</div>
</div>
<div class="section" id="graphs-cells">
<h2>Graphs &amp; Cells<a class="headerlink" href="#graphs-cells" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cell">
<h3>cell<a class="headerlink" href="#cell" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._cell.cell">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell" title="Permalink to this definition">¶</a></dt>
<dd><p>cell is a node in the calculation graphs.</p>
<ul class="simple">
<li><p>function is the function to be called</p></li>
<li><p>** kwargs are the function named key value args. NOTE: NO SUPPORT for <a href="#id43"><span class="problematic" id="id44">*</span></a>args nor <a href="#id45"><span class="problematic" id="id46">**</span></a>kwargs in function</p></li>
<li><p>output: where should the function output go?</p></li>
</ul>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">output</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sum</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">prod</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">output</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;prod&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">sum</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">prod</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<ul class="simple">
<li><p>cell.run() returns bool if cell needs to be run</p></li>
<li><p>cell.go() calculates the cell and returns the function with cell.output keys now populated.</p></li>
<li><p>cell.load()/cell.save() interface for self load/save persistence</p></li>
</ul>
<dl class="py method">
<dt id="pyg.base._cell.cell.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of D<a class="headerlink" href="#pyg.base._cell.cell.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="cell-go">
<h3>cell_go<a class="headerlink" href="#cell-go" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_go">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_go</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">go</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_go" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="cell-item">
<h3>cell_item<a class="headerlink" href="#cell-item" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_item">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_item" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>value<span class="classifier">cell or object or list of cells/objects</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>key<span class="classifier">TYPE, optional</span></dt><dd><p>The key within cell we are interested in.</p>
</dd>
</dl>
<p>value</p>
</dd></dl>

</div>
<div class="section" id="cell-func">
<h3>cell_func<a class="headerlink" href="#cell-func" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_func">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_func</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_func" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps a function to act on cells rather than just on values</p>
<p>When called, it will returns not just the function, but also args, kwargs used to call it.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">cell_func</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">3</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="encode-and-decode-save-and-load">
<h2>Encode and decode/save and load<a class="headerlink" href="#encode-and-decode-save-and-load" title="Permalink to this headline">¶</a></h2>
<div class="section" id="encode">
<h3>encode<a class="headerlink" href="#encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._encode.encode">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encode/decode are performed prior to sending to mongodb or after retrieval from db. The idea is to make object embedding in Mongo transparent to the user</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dict.Dict&quot;}&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">decode</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dict.Dict&quot;}&#39;</span><span class="p">})</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dictable.dictable&quot;}&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">decode</span><span class="p">(</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">==</span> <span class="n">value</span>
</pre></div>
</div>
<dl class="simple">
<dt>value<span class="classifier">obj</span></dt><dd><p>An object to be encoded</p>
</dd>
</dl>
<p>A pre-json object</p>
</dd></dl>

</div>
<div class="section" id="decode">
<h3>decode<a class="headerlink" href="#decode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._encode.decode">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">date</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>decodes a string or an object dict</p>
<dl class="simple">
<dt>value<span class="classifier">str or dict</span></dt><dd><p>usually a json</p>
</dd>
<dt>date<span class="classifier">None, bool or a regex expression, optional</span></dt><dd><p>date format to be decoded</p>
</dd>
</dl>
<dl class="simple">
<dt>obj</dt><dd><p>the json decpded.</p>
</dd>
</dl>
<dl class="simple">
<dt>class temp(dict):</dt><dd><p>pass</p>
</dd>
</dl>
<p>a = temp(a = 1, b = dt())</p>
</dd></dl>

</div>
<div class="section" id="pd-to-parquet">
<h3>pd_to_parquet<a class="headerlink" href="#pd-to-parquet" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._parquet.pd_to_parquet">
<code class="sig-prename descclassname">pyg.base._parquet.</code><code class="sig-name descname">pd_to_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">compression</span><span class="o">=</span><span class="default_value">'GZIP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._parquet.pd_to_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>a small utility to save df to parquet, extending both pd.Series and non-string columns</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="c1">## must have string column names</span>
<span class="go">        df.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span> <span class="c1">## pd.Series has no to_parquet</span>
<span class="go">        s.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;c:/temp/df.parquet&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;c:/temp/series.parquet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">df_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">series_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pd-read-parquet">
<h3>pd_read_parquet<a class="headerlink" href="#pd-read-parquet" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._parquet.pd_read_parquet">
<code class="sig-prename descclassname">pyg.base._parquet.</code><code class="sig-name descname">pd_read_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._parquet.pd_read_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>a small utility to read df/series from parquet, extending both pd.Series and non-string columns</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="c1">## must have string column names</span>
<span class="go">        df.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span> <span class="c1">## pd.Series has no to_parquet</span>
<span class="go">        s.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;c:/temp/df.parquet&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;c:/temp/series.parquet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">df_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">series_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="parquet-encode">
<h3>parquet_encode<a class="headerlink" href="#parquet-encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.parquet_encode">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">parquet_encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">compression</span><span class="o">=</span><span class="default_value">'GZIP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.parquet_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encodes a single DataFrame or a document containing dataframes into a an abject that can be decoded</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;c:/temp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">other</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoded</span> <span class="o">=</span> <span class="n">parquet_encode</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/data/a/0.parquet&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;df&#39;</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/other/df.parquet&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">decoded</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pd-to-csv">
<h3>pd_to_csv<a class="headerlink" href="#pd-to-csv" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.pd_to_csv">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">pd_to_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.pd_to_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="pd-read-csv">
<h3>pd_read_csv<a class="headerlink" href="#pd-read-csv" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.pd_read_csv">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">pd_read_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.pd_read_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="csv-encode">
<h3>csv_encode<a class="headerlink" href="#csv-encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.csv_encode">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">csv_encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.csv_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encodes a single DataFrame or a document containing dataframes into a an abject that can be decoded while saving dataframes into csv</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;c:/temp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">other</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoded</span> <span class="o">=</span> <span class="n">csv_encode</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/data/a/0.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;df&#39;</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/other/df.csv&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">decoded</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="dates-and-calendar">
<h2>dates and calendar<a class="headerlink" href="#dates-and-calendar" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dt">
<h3>dt<a class="headerlink" href="#dt" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dates.dt">
<code class="sig-prename descclassname">pyg.base._dates.</code><code class="sig-name descname">dt</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">dialect='uk'</em>, <em class="sig-param">none=&lt;built-in method now of type object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dates.dt" title="Permalink to this definition">¶</a></dt>
<dd><p>A more generic constructor for datetime.datetime.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># name of month</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;jan&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># name of month</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># future month code</span>
</pre></div>
</div>
<p>Note that it is quirky in implementing datetime arithmentic.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># a day before dt(2000,2,1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># a month before dt(2000,1,1)</span>
</pre></div>
</div>
<p>This may feel unnatural at first, but does allow for much nicer code, e.g.:
[dt(2000,i,1) for i in range(-10,10)]</p>
<dl class="simple">
<dt><a href="#id47"><span class="problematic" id="id48">*</span></a>args<span class="classifier">str, int or dates</span></dt><dd><p>argument to be converted into dates</p>
</dd>
<dt>dialect<span class="classifier">str, optional</span></dt><dd><p>parsing of 01/02/2020 is it 1st Feb or 2nd Jan? The default is ‘uk’, i.e. dd/mm/yyyy</p>
</dd>
<dt>none<span class="classifier">TYPE, optional</span></dt><dd><p>What is dt()? The default is datetime.datetime.now.</p>
</dd>
</dl>
<dl class="simple">
<dt>ValueError</dt><dd><p>unparsed date</p>
</dd>
</dl>
<dl class="simple">
<dt>datetime.datetime</dt><dd><p>date</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="dt-bump">
<h3>dt_bump<a class="headerlink" href="#dt-bump" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dates.dt_bump">
<code class="sig-prename descclassname">pyg.base._dates.</code><code class="sig-name descname">dt_bump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">bumps</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dates.dt_bump" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="drange">
<h3>drange<a class="headerlink" href="#drange" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.drange">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">drange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bump</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.drange" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick and happy wrapper for dateutil.rrule</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># 10 days starting from dt(2000,1,1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="s1">&#39;10b&#39;</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="c1"># weekdays between dt(2000,1,1) and dt(2000,1,17)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="s1">&#39;-10b&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="c1"># business days since 10 bdays ago</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="s1">&#39;-10b&#39;</span><span class="p">,</span> <span class="s1">&#39;10b&#39;</span><span class="p">,</span> <span class="s1">&#39;1w&#39;</span><span class="p">)</span> <span class="c1"># starting 10b days ago, to 10b from now, counting in weekly jumps</span>
</pre></div>
</div>
<dl class="simple">
<dt>t0<span class="classifier">date, optional</span></dt><dd><p>start date. The default is None.</p>
</dd>
<dt>t1<span class="classifier">date, optional</span></dt><dd><p>end date. The default is None.</p>
</dd>
<dt>bump<span class="classifier">timedelta, int, string, optional</span></dt><dd><p>bump period. The default is None.</p>
</dd>
</dl>
<p>list of dates</p>
</dd></dl>

</div>
<div class="section" id="date-range">
<h3>date_range<a class="headerlink" href="#date-range" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.date_range">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">date_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.date_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="calendar">
<h3>Calendar<a class="headerlink" href="#calendar" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._drange.Calendar">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">Calendar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">holidays</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weekend</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adj</span><span class="o">=</span><span class="default_value">'m'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Calendar is </dt><dd><ul class="simple">
<li><p>a dict</p></li>
<li><p>containing holiday dates</p></li>
<li><p>implementing business day arithmetic</p></li>
</ul>
</dd>
</dl>
<p>Calendar is restricted to operate between cal.t0 and cal.t1 which default to TMIN = 1900 and TMAX = 2300</p>
<dl class="simple">
<dt>Calendar does this by having two key members:</dt><dd><ul class="simple">
<li><p>dt2int: a mapping from all business dates to their integer ‘clock’</p></li>
<li><p>int2dt: a mapping from integer value to the date</p></li>
</ul>
</dd>
</dl>
<p>Since Calendar is an ‘expensive’ memory wise, we assign a key to the calendar and the Calendar is stored in the singleton calendars under this key</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">holidays</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;2012-01-02&#39;</span><span class="p">,</span><span class="s1">&#39;New Year Day&#39;</span><span class="p">,],</span>
<span class="go">                        [2,&#39;2012-01-16&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [3,&#39;2012-02-20&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [4,&#39;2012-05-28&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [5,&#39;2012-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [6,&#39;2012-09-03&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [7,&#39;2012-10-08&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [8,&#39;2012-11-12&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [9,&#39;2012-11-22&#39;,&#39;Thanksgiving Day&#39;,],</span>
<span class="go">                        [10,&#39;2012-12-25&#39;,&#39;Christmas Day&#39;,],</span>
<span class="go">                        [11,&#39;2013-01-01&#39;,&#39;New Year Day&#39;,],</span>
<span class="go">                        [12,&#39;2013-01-21&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [13,&#39;2013-02-18&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [14,&#39;2013-05-27&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [15,&#39;2013-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [16,&#39;2013-09-02&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [17,&#39;2013-10-14&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [18,&#39;2013-11-11&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [19,&#39;2013-11-28&#39;,&#39;Thanksgiving Day&#39;,],</span>
<span class="go">                        [20,&#39;2013-12-25&#39;,&#39;Christmas Day&#39;,],</span>
<span class="go">                        [21,&#39;2014-01-01&#39;,&#39;New Year Day&#39;,],</span>
<span class="go">                        [22,&#39;2014-01-20&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [23,&#39;2014-02-17&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [24,&#39;2014-05-26&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [25,&#39;2014-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [26,&#39;2014-09-01&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [27,&#39;2014-10-13&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [28,&#39;2014-11-11&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [29,&#39;2014-11-27&#39;,&#39;Thanksgiving Day&#39;,],], [&#39;i&#39;, &#39;date&#39;, &#39;name&#39;]).do(dt, &#39;date&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;US&#39;</span><span class="p">,</span> <span class="n">holidays</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">t0</span> <span class="o">=</span> <span class="mi">2012</span><span class="p">,</span> <span class="n">t1</span> <span class="o">=</span> <span class="mi">2015</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">cal</span><span class="o">.</span><span class="n">is_bday</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>        <span class="c1"># Labor day</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cached_calendar</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;US&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">cached_calendar</span><span class="o">.</span><span class="n">is_bday</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>   <span class="c1"># Labor day</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">adjust</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">drange</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">),]</span> <span class="c1">## skipped labour day and weekend prior</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">bdays</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id49">
<h3>calendar<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.calendar">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">calendar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">holidays</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weekend</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to returns either an existing calendar or construct a new one.
- calendar(‘US’) will return a US calendar if that is already cached
- calendar(‘US’, us_holiday_dates) will construct a calendar with holiday dates and then cache it</p>
</dd></dl>

</div>
<div class="section" id="clock">
<h3>clock<a class="headerlink" href="#clock" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.clock">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">clock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.clock" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a vector marking the passage of time.</p>
<p>ts : timeseries
time : None, a string or a Calendar</p>
<blockquote>
<div><p>None: Will increment by 1 every non-nan observation
‘i’ : increment by 1 every date in index (nan or not)
‘b’ : weekdays distance
‘d’ : day-distance (ignore intraday stamp)
‘m’ : month-distance
‘y’ : year-distance
calendar: uses the business-days distance between any two dates</p>
</div></blockquote>
<p>t: starting time in the past.</p>
<dl class="simple">
<dt>an array </dt><dd><p>an increasing array of time such that distance between points match the above.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">))),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">26090</span><span class="p">,</span> <span class="mi">26090</span><span class="p">,</span> <span class="mi">26090</span><span class="p">,</span> <span class="mi">26091</span><span class="p">,</span> <span class="mi">26092</span><span class="p">,</span> <span class="mi">26093</span><span class="p">,</span> <span class="mi">26094</span><span class="p">,</span> <span class="mi">26095</span><span class="p">,</span> <span class="mi">26095</span><span class="p">,</span> <span class="mi">26095</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="s1">&#39;9b&#39;</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)),</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">26090</span><span class="p">,</span> <span class="mi">26100</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="text-manipulation">
<h2>text manipulation<a class="headerlink" href="#text-manipulation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lower">
<h3>lower<a class="headerlink" href="#lower" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.lower">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">lower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.lower" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="upper">
<h3>upper<a class="headerlink" href="#upper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.upper">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">upper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.upper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="proper">
<h3>proper<a class="headerlink" href="#proper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.proper">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">proper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.proper" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="bits-and-pieces">
<h2>Bits and pieces<a class="headerlink" href="#bits-and-pieces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pyg.base._types">
<span id="type-functions"></span><h3>type functions<a class="headerlink" href="#module-pyg.base._types" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._types.is_arr">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_arr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a numpy array of non-zero-size</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_bool">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_bool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a Bool, or a <a href="#id52"><span class="problematic" id="id53">np.bool_</span></a> type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_date">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_date" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a date type: either datetime.date, datetime.datetime or np.datetime64</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_df">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_df" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.DataFrame</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_dict">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a dict</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_float">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_float</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_float" title="Permalink to this definition">¶</a></dt>
<dd><p>is value an float, or any variant of np.float</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_int">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_int</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_int" title="Permalink to this definition">¶</a></dt>
<dd><p>is value an int, or any variant of np.intN type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_iterable">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_iterable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>is value Iterable excluding a string</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_len">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_len</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_len" title="Permalink to this definition">¶</a></dt>
<dd><p>is value of zero length (or has no len at all)</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_list">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_list" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a list</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_nan">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_nan</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a nan or an inf. Unlike np.isnan, works for non numeric</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_none">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_none" title="Permalink to this definition">¶</a></dt>
<dd><p>is value None</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_num">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_num</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_num" title="Permalink to this definition">¶</a></dt>
<dd><p>is _int(value) or is_float(value)</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_pd">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_pd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_pd" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.DataFrame/pd.Series</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_series">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_series</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_series" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.Series</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_str">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_str" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a str, or a <a href="#id54"><span class="problematic" id="id55">np.str_</span></a> type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_ts">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_ts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_ts" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pandas datafrome whch is indexed by datetimes</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_tuple">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a tuple</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.nan2none">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">nan2none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.nan2none" title="Permalink to this definition">¶</a></dt>
<dd><p>convert np.nan/np.inf to None</p>
</dd></dl>

</div>
<div class="section" id="zipper">
<h3>zipper<a class="headerlink" href="#zipper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._zip.zipper">
<code class="sig-prename descclassname">pyg.base._zip.</code><code class="sig-name descname">zipper</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._zip.zipper" title="Permalink to this definition">¶</a></dt>
<dd><p>a safer version of zip</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="kc">None</span><span class="p">))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="kc">None</span><span class="p">))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
</pre></div>
</div>
<p>import pytest
with pytest.raises(ValueError):</p>
<blockquote>
<div><p>zipper([1,2,3], [4,5])</p>
</div></blockquote>
<dl class="simple">
<dt><a href="#id50"><span class="problematic" id="id51">*</span></a>values<span class="classifier">lists </span></dt><dd><p>values to be zipped</p>
</dd>
</dl>
<p>zipped values</p>
</dd></dl>

</div>
<div class="section" id="reducer">
<h3>reducer<a class="headerlink" href="#reducer" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._reducer.reducer">
<code class="sig-prename descclassname">pyg.base._reducer.</code><code class="sig-name descname">reducer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">sequence</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._reducer.reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>reduce adds stuff to zero by defaults. This is not needed.</p>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>binary function.</p>
</dd>
<dt>sequence<span class="classifier">iterable</span></dt><dd><p>list of inputs to be applied iteratively to reduce.</p>
</dd>
<dt>default<span class="classifier">TYPE, optional</span></dt><dd><p>A default value to be returned with an empty sequence</p>
</dd>
</dl>
<dl class="simple">
<dt>TYPE</dt><dd><p>result of reduction</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">mul</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[])</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reducing">
<h3>reducing<a class="headerlink" href="#reducing" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._reducer.reducing">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._reducer.</code><code class="sig-name descname">reducing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._reducer.reducing" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a bivariate-function being able to act on a sequence of elements using reduction</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">mul</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="n">mul</span><span class="p">)([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">24</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="n">mul</span><span class="p">)(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">24</span>    
</pre></div>
</div>
<p>Since a.join(b).join(c).join(d) is also very common, we provide a simple interface for that:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="s1">&#39;__add__&#39;</span><span class="p">)([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="s1">&#39;__add__&#39;</span><span class="p">)(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span>
</pre></div>
</div>
<p>d = dictable(a = [1,2,3,5,4])
reducing(‘inc’)(d, dict(a=1))</p>
</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyg</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extensions-to-dict">Extensions to dict</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dictattr">dictattr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dict">Dict</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dictable">dictable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#perdictable">perdictable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#join">join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#named-dict">named_dict</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#decorators">Decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wrapper">Wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timer">timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#try-none">try_none</a></li>
<li class="toctree-l3"><a class="reference internal" href="#try-back">try_back</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loop">loop</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#graphs-cells">Graphs &amp; Cells</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cell">cell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-go">cell_go</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-item">cell_item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-func">cell_func</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encode-and-decode-save-and-load">Encode and decode/save and load</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#encode">encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decode">decode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-to-parquet">pd_to_parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-read-parquet">pd_read_parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parquet-encode">parquet_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-to-csv">pd_to_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-read-csv">pd_read_csv</a></li>
<li class="toctree-l3"><a class="reference internal" href="#csv-encode">csv_encode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dates-and-calendar">dates and calendar</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dt">dt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dt-bump">dt_bump</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drange">drange</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-range">date_range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calendar">Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clock">clock</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#text-manipulation">text manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lower">lower</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upper">upper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#proper">proper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bits-and-pieces">Bits and pieces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-pyg.base._types">type functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zipper">zipper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reducer">reducer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reducing">reducing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to pyg’s documentation!</a></li>
      <li>Next: <a href="tutorial.html" title="next chapter">Tutorial</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Yoav Git.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/api.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>