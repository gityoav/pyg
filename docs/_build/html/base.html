
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyg.base &#8212; pyg 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="pyg.mongo" href="mongo.html" />
    <link rel="prev" title="Welcome to pyg!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="pyg-base">
<h1>pyg.base<a class="headerlink" href="#pyg-base" title="Permalink to this headline">¶</a></h1>
<div class="section" id="extensions-to-dict">
<h2>extensions to dict<a class="headerlink" href="#extensions-to-dict" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dictattr">
<h3>dictattr<a class="headerlink" href="#dictattr" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dictattr.dictattr">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dictattr.</code><code class="sig-name descname">dictattr</code><a class="headerlink" href="#pyg.base._dictattr.dictattr" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>A simple dict with extended member manipulation</dt><dd><ol class="arabic simple">
<li><p>access using d.key</p></li>
<li><p>access multiple elements using d[key1, key2]</p></li>
</ol>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>members access</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition, it has extended key selection/subsetting</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>subsetting</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;a&#39;</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;not in keys&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>dictattr supports not in-place ‘update’:</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>updating via adding another dict</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;replacing old value&#39;</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;new key&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;replacing old value&#39;</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="s1">&#39;new key&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of D<a class="headerlink" href="#pyg.base._dictattr.dictattr.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.keys">
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr returns an actual list rather than a generator. 
Further, this recognises that the keys are necessarily unique so it returns a ulist which is also a set</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>ulist</dt><dd><p>list of keys of dictattr.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">ulist</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.relabel">
<code class="sig-name descname">relabel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">relabels</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.relabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Identical to relabel. See relabel for full docs</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.rename">
<code class="sig-name descname">rename</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">relabels</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Identical to relabel. See relabel for full docs</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictattr.dictattr.values">
<code class="sig-name descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; an object providing a view on D’s values<a class="headerlink" href="#pyg.base._dictattr.dictattr.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__add__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__add__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__add__" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr uses add as a copy + update. Similar to the latest python <a href="#id1"><span class="problematic" id="id2">|</span></a>=</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">+</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>other: dict</dt><dd><p>a dict used to update current dict.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__sub__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__sub__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">copy</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__sub__" title="Permalink to this definition">¶</a></dt>
<dd><p>deletes an item but does not throw an exception if not there
dictattr uses subtraction to remove key(s)</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>updated dictattr</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;key not there&#39;</span> <span class="o">==</span> <span class="n">d</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#commutative</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">-</span> <span class="s1">&#39;c&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictattr.dictattr.__and__">
<code class="sig-prename descclassname">pyg.base._dictattr.dictattr.</code><code class="sig-name descname">__and__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">other</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictattr.dictattr.__and__" title="Permalink to this definition">¶</a></dt>
<dd><p>dictattr uses &amp; as a set operator for key filtering</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>updated dictattr</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;not_there&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">dictattr</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#commutative</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">d</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">&amp;</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="ulist">
<h3>ulist<a class="headerlink" href="#ulist" title="Permalink to this headline">¶</a></h3>
<p>The dictattr.keys() method returns a ulist: a list with unique elements:</p>
<dl class="py class">
<dt id="pyg.base._ulist.ulist">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._ulist.</code><code class="sig-name descname">ulist</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="n">unique</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._ulist.ulist" title="Permalink to this definition">¶</a></dt>
<dd><p>A list whose members are unique. It has +/- operations overloaded while also supporting set opeations &amp;/|</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="nb">list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>addition adds element(s)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="mi">4</span>  <span class="o">==</span> <span class="nb">list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="nb">list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="nb">list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>subtraction removes element(s)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>set operations</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="mi">1</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="mi">4</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ulist</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">|</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._ulist.ulist.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._ulist.ulist.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a shallow copy of the list.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="dict">
<h3>Dict<a class="headerlink" href="#dict" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dict.Dict">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dict.</code><code class="sig-name descname">Dict</code><a class="headerlink" href="#pyg.base._dict.Dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Dict extends dictattr to allow access to <em>functions</em> of members</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
<p>Dict is also callable where the key-value is used to add/update current members</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">Dict</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)(</span><span class="n">b</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="p">)(</span><span class="n">c</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._dict.Dict.do">
<code class="sig-name descname">do</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.Dict.do" title="Permalink to this definition">¶</a></dt>
<dd><p>applies a function(s) on multiple keys at the same time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable or list of callables</span></dt><dd><p>function to be applied per column</p>
</dd>
<dt><a href="#id3"><span class="problematic" id="id4">*</span></a>keys<span class="classifier">string/list of strings</span></dt><dd><p>list of columns to be applied. If missing, applied to all columns</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>res : Dict</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;adam&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;atkins&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">proper</span><span class="p">)</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;Atkins&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using another key in the calculation</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">denominator</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">value</span><span class="o">/</span><span class="n">denominator</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">denominator</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dict.Dict.__call__">
<code class="sig-prename descclassname">pyg.base._dict.Dict.</code><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.Dict.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</div>
<div class="section" id="dictable">
<h3>dictable<a class="headerlink" href="#dictable" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._dictable.dictable">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._dictable.</code><code class="sig-name descname">dictable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">columns</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">What is dictable?</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>dictable is a table, a collection of iterable records. It is also a dict with each key being a column. 
Why not use a pandas.DataFrame? pd.DataFrame leads a dual life:</p>
<blockquote>
<div><ul class="simple">
<li><p>by day an index-based optimized numpy array supporting e.g. timeseries analytics etc.</p></li>
<li><p>by night, a table with keys supporting filtering, aggregating, pivoting on keys as well as inner/outer joining on keys.</p></li>
</ul>
</div></blockquote>
<p>dictable only tries to do the latter. dictable should be thought of as a ‘container for complicated objects’ rather than just an array of primitive floats.
In general, each cell may contain timeseries, yield_curves, machine-learning experiments etc.
The interface is very succinct and allows the user to concentrate on logic of the calculations rather than boilerplate.</p>
<p>dictable supports quite a flexible construction:</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>construction using records</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">39</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">),</span> 
<span class="gp">&gt;&gt;&gt; </span>              <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">29</span><span class="p">,</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>construction using columns and constants</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>construction using pandas.DataFrame</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">original</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df_from_dictable</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">original</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dictable_from_df</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">df_from_dictable</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">original</span> <span class="o">==</span> <span class="n">dictable_from_df</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>construction rows and columns</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;UK&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;UK&#39;</span><span class="p">]],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Access</dt>
<dd class="field-odd"><p>column access</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span>  <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;atkins&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">)]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;alan atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara brown&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Access</dt>
<dd class="field-odd"><p>row access &amp; iteration</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;UK&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">[</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">d</span><span class="p">]</span> <span class="o">==</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">39</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;UK&#39;</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span>                              <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">29</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="s1">&#39;UK&#39;</span><span class="p">}]</span>
</pre></div>
</div>
<p>Note that members access is commutative:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;alan&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">name</span> <span class="o">+</span> <span class="n">surname</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">name</span> <span class="o">+</span> <span class="n">surname</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">sum</span><span class="p">([</span><span class="n">row</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">d</span><span class="p">],</span> <span class="n">dictable</span><span class="p">())</span> <span class="o">==</span> <span class="n">d</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>adding records</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">+</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">49</span><span class="p">}</span> <span class="c1"># can add a record directly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;chocolate&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">49</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">+=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;dana&#39;</span><span class="p">,</span> <span class="s1">&#39;ender&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;deutch&#39;</span><span class="p">,</span> <span class="s1">&#39;esterhase&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Germany&#39;</span><span class="p">,</span> <span class="s1">&#39;Hungary&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;charlie&#39;</span><span class="p">,</span> <span class="s1">&#39;dana&#39;</span><span class="p">,</span> <span class="s1">&#39;ender&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">dictable</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">d</span><span class="p">,</span><span class="n">d</span><span class="p">]))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>adding columns</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">### all of the below are ways of adding columns ####</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">gender</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;gender&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">gender</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">],</span> <span class="n">profession</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;astronaut&#39;</span><span class="p">,</span> <span class="s1">&#39;barber&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="o">**</span><span class="n">d2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>adding derived columns</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="p">(</span><span class="n">full_name</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">proper</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">)))</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;full_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">d</span><span class="p">[</span><span class="k">lambda</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">:</span> <span class="n">proper</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> </span><span class="si">%s</span><span class="s1">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">full_name</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;Alan Atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;Barbara Brown&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>dropping columns</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">d</span><span class="o">.</span><span class="n">country</span> <span class="c1"># in place</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">]</span> <span class="c1"># in place</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">(</span><span class="n">d</span> <span class="o">-</span> <span class="s1">&#39;name&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;atkins&#39;</span><span class="p">}</span> <span class="ow">and</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;surname&#39;</span><span class="p">:</span> <span class="s1">&#39;atkins&#39;</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>row selection, inc/exc</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">],</span> <span class="n">age</span> <span class="o">=</span> <span class="p">[</span><span class="mi">39</span><span class="p">,</span> <span class="mi">29</span><span class="p">],</span> <span class="n">country</span> <span class="o">=</span> <span class="s1">&#39;UK&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alan&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="o">&lt;</span><span class="mi">30</span><span class="p">))</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1"># can filter on *functions* of members, not just members.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">surname</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="o">&lt;</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;barbara&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">age</span><span class="p">:</span> <span class="n">age</span><span class="o">&lt;</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;alan&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="simple">
<dt>dictable supports:</dt><dd><ul class="simple">
<li><p>sort</p></li>
<li><p>group-by/ungroup</p></li>
<li><p>list-by/ unlist</p></li>
<li><p>pivot/unpivot</p></li>
<li><p>inner join, outer join and xor</p></li>
</ul>
</dd>
</dl>
<p>Full details are below.</p>
<dl class="py method">
<dt id="pyg.base._dictable.dictable.concat">
<em class="property">classmethod </em><code class="sig-name descname">concat</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">others</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.concat" title="Permalink to this definition">¶</a></dt>
<dd><p>adds together multiple dictables. equivalent to sum(others, self) but a little faster</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id5"><span class="problematic" id="id6">*</span></a>others<span class="classifier">dictables</span></dt><dd><p>records to be added to current table</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>merged<span class="classifier">dictable</span></dt><dd><p>sum of all records</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d1</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d2</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d3</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dictable</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">d3</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dictable</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">d1</span><span class="p">,</span><span class="n">d2</span><span class="p">,</span><span class="n">d3</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.do">
<code class="sig-name descname">do</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">keys</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.do" title="Permalink to this definition">¶</a></dt>
<dd><p>applies a function(s) on multiple keys at the same time</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable or list of callables</span></dt><dd><p>function to be applied per column</p>
</dd>
<dt><a href="#id7"><span class="problematic" id="id8">*</span></a>keys<span class="classifier">string/list of strings</span></dt><dd><p>list of columns to be applied. If missing, applied to all columns</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>res : dictable</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;adam&#39;</span><span class="p">,</span> <span class="s1">&#39;barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;cohen&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="n">proper</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Adam&#39;</span><span class="p">,</span> <span class="s1">&#39;Barbara&#39;</span><span class="p">,</span> <span class="s1">&#39;Chris&#39;</span><span class="p">],</span> <span class="n">surname</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Atkins&#39;</span><span class="p">,</span> <span class="s1">&#39;Brown&#39;</span><span class="p">,</span> <span class="s1">&#39;Cohen&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using another column in the calculation</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">denominator</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="k">lambda</span> <span class="n">value</span><span class="p">,</span> <span class="n">denominator</span><span class="p">:</span> <span class="n">value</span><span class="o">/</span><span class="n">denominator</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.3</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span> <span class="n">denominator</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.exc">
<code class="sig-name descname">exc</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">functions</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">filters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.exc" title="Permalink to this definition">¶</a></dt>
<dd><p>performs a filter on what rows to exclude</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id9"><span class="problematic" id="id10">*</span></a>functions<span class="classifier">callables or a dict</span></dt><dd><p>filters based on functions of each row</p>
</dd>
<dt><a href="#id11"><span class="problematic" id="id12">**</span></a>filters<span class="classifier">value or list of values</span></dt><dd><p>filters per each column</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>table with rows that satisfy all conditions excluded.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>filtering on keys</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>         
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> 
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>filtering on callables</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value for key if key is in the dictionary, else default.</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.groupby">
<code class="sig-name descname">groupby</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">by</span></em>, <em class="sig-param"><span class="n">grp</span><span class="o">=</span><span class="default_value">'grp'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.groupby" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to pandas groupby but returns a dictable of dictables with a new column ‘grp’</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;grp&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">is_dictable</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grp</span><span class="p">)</span> <span class="ow">and</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">grp</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p><a href="#id13"><span class="problematic" id="id14">*</span></a>by : str or list of strings</p>
<blockquote>
<div><p>gr.</p>
</div></blockquote>
<dl class="simple">
<dt>grp<span class="classifier">str, optional</span></dt><dd><p>The name of the column for the dictables per each key. The default is ‘grp’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>A dictable containing the original keys and a dictable per unique key.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.inc">
<code class="sig-name descname">inc</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">functions</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">filters</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.inc" title="Permalink to this definition">¶</a></dt>
<dd><p>performs a filter on what rows to include</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id15"><span class="problematic" id="id16">*</span></a>functions<span class="classifier">callables or a dict</span></dt><dd><p>filters based on functions of each row</p>
</dd>
<dt><a href="#id17"><span class="problematic" id="id18">**</span></a>filters<span class="classifier">value or list of values</span></dt><dd><p>filters per each column</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>table with rows that satisfy all conditions.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>filtering on keys</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>            
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>            
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> 
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>filtering on callables</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.join">
<code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">lcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs either an inner join or a cross join between two dictables</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>inner join</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>outer join</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.pivot">
<code class="sig-name descname">pivot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">agg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.pivot" title="Permalink to this definition">¶</a></dt>
<dd><p>pivot table functionality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>x<span class="classifier">str/list of str</span></dt><dd><p>unique keys per each row</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>unique key per each column</p>
</dd>
<dt>z<span class="classifier">str/callable</span></dt><dd><p>A column in the table or an evaluated quantity per each row</p>
</dd>
<dt>agg<span class="classifier">None/callable or list of callables, optional</span></dt><dd><p>Each (x,y) cell can potentially contain multiple z values. so if agg = None, a list is returned
If you want the data aggregated in any way, then supply an aggregating function(s)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>A dictable which is a pivot table of the original data</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable_as_list</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable</span> <span class="o">=</span> <span class="n">timetable_as_list</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">timetable</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">;</span> <span class="n">z</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.sort">
<code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">by</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the table either using a key, list of keys or functions of members</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">_</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="s1">&#39;abracadabra&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span> <span class="n">c</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">d</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">%</span> <span class="mi">11</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;aaaaabbcdrr&#39;</span> <span class="ow">and</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">b</span><span class="o">*</span><span class="mi">3</span> <span class="o">%</span> <span class="mi">11</span><span class="p">)</span> <span class="c1">## sorting again by c but using a function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.ungroup">
<code class="sig-name descname">ungroup</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">grp</span><span class="o">=</span><span class="default_value">'grp'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.ungroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Undoes groupby</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>grp<span class="classifier">str, optional</span></dt><dd><p>column name where dictables are. The default is ‘grp’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>dictable.</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.unlist">
<code class="sig-name descname">unlist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.unlist" title="Permalink to this definition">¶</a></dt>
<dd><p>undoes listby…</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>dictable[2 x 2]
b|a     
0|[2, 4]
1|[1, 3]</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="o">.</span><span class="n">listby</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unlist</span><span class="p">()</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">x</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable where all rows with list in them have been ‘expanded’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.unpivot">
<code class="sig-name descname">unpivot</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.unpivot" title="Permalink to this definition">¶</a></dt>
<dd><p>undoes self.xyz / self.pivot</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">orig</span> <span class="o">=</span> <span class="p">(</span><span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">*</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]))(</span><span class="n">z</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pivot</span> <span class="o">=</span> <span class="n">orig</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unpivot</span> <span class="o">=</span> <span class="n">pivot</span><span class="o">.</span><span class="n">unpivot</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">do</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span> <span class="c1"># the conversion to column names mean y is now string... so we convert back to int</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">orig</span> <span class="o">==</span> <span class="n">unpivot</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>x<span class="classifier">str/list of strings</span></dt><dd><p>list of keys in the pivot table.</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>name of the columns that wil be used for the values that are currently column headers.</p>
</dd>
<dt>z<span class="classifier">str</span></dt><dd><p>name of the column that describes the data currently within the pivot table.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>dictable</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.update">
<code class="sig-name descname">update</code><span class="sig-paren">(</span><span class="optional">[</span><em class="sig-param">E</em>, <span class="optional">]</span><em class="sig-param">**F</em><span class="sig-paren">)</span> &#x2192; None.  Update D from dict/iterable E and F.<a class="headerlink" href="#pyg.base._dictable.dictable.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]
If E is present and lacks a .keys() method, then does:  for k, v in E: D[k] = v
In either case, this is followed by: for k in F:  D[k] = F[k]</p>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.xor">
<code class="sig-name descname">xor</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">other</span></em>, <em class="sig-param"><span class="n">lcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">rcols</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">mode</span><span class="o">=</span><span class="default_value">'l'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.xor" title="Permalink to this definition">¶</a></dt>
<dd><p>returns what is in lhs but NOT in rhs (or vice versa if mode = ‘r’). Together with inner joining, can be used as left/right join</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">other</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">xor</span><span class="p">(</span><span class="n">other</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span> <span class="c1"># this is in lhs but not in rhs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="bp">self</span><span class="o">.</span><span class="n">xor</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">lcols</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rcols</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1"># fit can be done using formulae rather than actual columns</span>
</pre></div>
</div>
<p>The XOR functionality can be performed using quotient (divide):
&gt;&gt;&gt; assert lhs/rhs == dictable(a = 4)
&gt;&gt;&gt; assert rhs/lhs == dictable(a = 5)</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rhs</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">left_join_can_be_done_simply_as</span> <span class="o">=</span> <span class="n">lhs</span> <span class="o">*</span> <span class="n">rhs</span> <span class="o">+</span> <span class="n">lhs</span><span class="o">/</span><span class="n">rhs</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>other<span class="classifier">dictable (or something that can be turned to one)</span></dt><dd><p>what we exclude with.</p>
</dd>
<dt>lcols<span class="classifier">str/list of strs, optional</span></dt><dd><p>the left columns/formulae on which we match. The default is None.</p>
</dd>
<dt>rcols<span class="classifier">str/list of strs, optional</span></dt><dd><p>the right columns/formulae on which we match. The default is None.</p>
</dd>
<dt>mode<span class="classifier">string, optional</span></dt><dd><p>When set to ‘r’, performs xor the other way. The default is ‘l’.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable containing what is in self but not in ther other dictable.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._dictable.dictable.xyz">
<code class="sig-name descname">xyz</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em>, <em class="sig-param"><span class="n">z</span></em>, <em class="sig-param"><span class="n">agg</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>pivot table functionality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>x<span class="classifier">str/list of str</span></dt><dd><p>unique keys per each row</p>
</dd>
<dt>y<span class="classifier">str</span></dt><dd><p>unique key per each column</p>
</dd>
<dt>z<span class="classifier">str/callable</span></dt><dd><p>A column in the table or an evaluated quantity per each row</p>
</dd>
<dt>agg<span class="classifier">None/callable or list of callables, optional</span></dt><dd><p>Each (x,y) cell can potentially contain multiple z values. so if agg = None, a list is returned
If you want the data aggregated in any way, then supply an aggregating function(s)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>A dictable which is a pivot table of the original data</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable_as_list</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">timetable</span> <span class="o">=</span> <span class="n">timetable_as_list</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">timetable</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">*</span> <span class="n">dictable</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">;</span> <span class="n">y</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">;</span> <span class="n">z</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">xyz</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">,</span> <span class="nb">len</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="pyg.base._dictable.dictable.__call__">
<code class="sig-prename descclassname">pyg.base._dictable.dictable.</code><code class="sig-name descname">__call__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dictable.dictable.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self as a function.</p>
</dd></dl>

</div>
<div class="section" id="perdictable">
<h3>perdictable<a class="headerlink" href="#perdictable" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._perdictable.perdictable">
<code class="sig-prename descclassname">pyg.base._perdictable.</code><code class="sig-name descname">perdictable</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._perdictable.perdictable" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator that makes a function works per dictable and not just on original value</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">perdictable</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">])</span>     
</pre></div>
</div>
<p>The new modified function p now works the same on old values:</p>
<dl class="field-list simple">
<dt class="field-odd">Paramaters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>A function</p>
</dd>
<dt>on: str/list of str</dt><dd><p>perform join based on these keys</p>
</dd>
<dt>renames: dict </dt><dd><p>This tells us which column to grab from which table</p>
</dd>
<dt>defaults: dict</dt><dd><p>If a default is provided for a parameter, we will perform a left join, substituting missing values with the defaults</p>
</dd>
<dt>if_none: bool, list of keys</dt><dd><p>If historic data is None while the row has expired, should we force a recalculation? if True, will be done.</p>
</dd>
<dt>output_is_input: bool, list of keys</dt><dd><p>Some functions want their own outut to be presented to them. If you see to True, if cached values exist for these columns, these are provided to the function</p>
</dd>
<dt>include_inputs:</dt><dd><p>When we return the outputs, do you want the inputs to be included as well in the dictable.</p>
</dd>
<dt>col: str</dt><dd><p>the name of the variable output.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">perdictable</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">include_inputs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">expiry</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
<p># some parameters are constant, some are tables…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>  
</pre></div>
</div>
<p># multiple tables… some unkeyed</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p># multiple tables… all keyed</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>existing data provided using data and expiry</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;we calculated this before&#39;</span><span class="p">,</span> <span class="s1">&#39;we calculated before but hasnt expired&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expiry</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">3000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">inputs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">p</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">expiry</span> <span class="o">=</span> <span class="n">expiry</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">find_data</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="s1">&#39;we calculated this before&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span><span class="o">.</span><span class="n">find_data</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">5</span>  <span class="c1"># although calculated before, we recalculate as its expiry is in the future</span>
</pre></div>
</div>
<p>function = lambda a, b: dict(sum = a+b, prod = a*b); function.output = [‘sum’, ‘prod’]
self = perdictable(function)
self(a = 1, b = 2)
inputs = dict(a = dictable(a = [1,2,3]), b = 2); expiry = None
self(a = dictable(a = [1,2,3]), b = 2)</p>
</dd></dl>

</div>
<div class="section" id="join">
<h3>join<a class="headerlink" href="#join" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._perdictable.join">
<code class="sig-prename descclassname">pyg.base._perdictable.</code><code class="sig-name descname">join</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">inputs</span></em>, <em class="sig-param"><span class="n">on</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">renames</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">defaults</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._perdictable.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Suppose we have a function which is defined on simple numbers</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">profit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">amount</span><span class="p">,</span> <span class="n">price</span><span class="p">:</span> <span class="n">amount</span>  <span class="o">*</span> <span class="n">price</span>    
</pre></div>
</div>
<p>The amounts sold are available in one table and prices in another</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">amounts</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">product</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;pear&#39;</span><span class="p">],</span> <span class="n">amount</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prices</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">product</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;apple&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="s1">&#39;pear&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">],</span> <span class="n">price</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">amount</span> <span class="o">=</span> <span class="n">amounts</span><span class="p">,</span> <span class="n">price</span> <span class="o">=</span> <span class="n">prices</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;product&#39;</span><span class="p">)(</span><span class="n">profit</span> <span class="o">=</span> <span class="n">profit</span><span class="p">)</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dictable</span><span class="p">[</span><span class="mi">3</span> <span class="n">x</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">product</span><span class="o">|</span><span class="n">amount</span><span class="o">|</span><span class="n">price</span><span class="o">|</span><span class="n">profit</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apple</span>  <span class="o">|</span><span class="mi">1</span>     <span class="o">|</span><span class="mi">4</span>    <span class="o">|</span><span class="mi">4</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="n">orange</span> <span class="o">|</span><span class="mi">2</span>     <span class="o">|</span><span class="mi">5</span>    <span class="o">|</span><span class="mi">10</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">pear</span>   <span class="o">|</span><span class="mi">3</span>     <span class="o">|</span><span class="mi">6</span>    <span class="o">|</span><span class="mi">18</span>    
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>inputs<span class="classifier">dict</span></dt><dd><p>a dict of input parameters, some of them may be dictables.</p>
</dd>
<dt>on<span class="classifier">str/list of str</span></dt><dd><p>when we have dictables</p>
</dd>
<dt>renames<span class="classifier">dict, optional</span></dt><dd><p>remapping. if the datasets contain multiple columns, you can say renames = dict(price = ‘price_in_dollar’) to tell the algo, this is the column to use
The default is None.</p>
</dd>
<dt>defaults<span class="classifier">dict, optional</span></dt><dd><p>Normally, an inner join is performed. However, if there is a default value/formula for when e.g. a price is missing, use this. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dictable</dt><dd><p>a dictable of an inner join.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>how column mapping is done</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## if there is only one column apart from keys, then it is selected:</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])),</span> <span class="n">on</span> <span class="o">=</span> <span class="n">on</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">random_name</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])),</span> <span class="n">on</span> <span class="o">=</span> <span class="n">on</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">## if there are multiple columns, if variable name is there, we use it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])),</span> <span class="n">on</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">## if there are multiple columns, and &#39;data&#39; is one of the columns, we use it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])),</span> <span class="n">on</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>how column mapping is done with rename</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="c1">## pick b or c?</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">renames</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>joins with partial columns in some tables</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1">## only column a here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="c1">## only column b here</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">j</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">c</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span> <span class="ow">and</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>join with defaults</p>
</dd>
</dl>
<p>If no defaults are provided, we need all variables to be present. 
However, if we specify defaults, we left-join on that variable and insert the default value</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="n">on</span><span class="p">)</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span><span class="p">))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kc">None</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">join</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">),</span> <span class="n">on</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span> <span class="o">==</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kc">None</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="named-dict">
<h3>named_dict<a class="headerlink" href="#named-dict" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._named_dict.named_dict">
<code class="sig-prename descclassname">pyg.base._named_dict.</code><code class="sig-name descname">named_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span></em>, <em class="sig-param"><span class="n">keys</span></em>, <em class="sig-param"><span class="n">defaults</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">types</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">casts</span><span class="o">=</span><span class="default_value">{}</span></em>, <em class="sig-param"><span class="n">basedict</span><span class="o">=</span><span class="default_value">'pyg.base.dictattr'</span></em>, <em class="sig-param"><span class="n">debug</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._named_dict.named_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>This forms a base for all classes. It is similar to named_tuple but:</p>
<ul class="simple">
<li><p>supports additional features such as casting/type checking.</p></li>
<li><p>support default values</p></li>
</ul>
<p>The resulting class is a dict so can be stored in MongoDB, sent to json or be used to construct a pd.Series automatically.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Simple construction</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;today&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;today&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>How named_dict works with json/pandas/other named_dicts</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Customer</span><span class="p">(</span><span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">])):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="nf">add_to_balance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">res</span><span class="o">.</span><span class="n">balance</span> <span class="o">+=</span> <span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="n">res</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="o">.</span><span class="n">add_to_balance</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">balance</span> <span class="o">==</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">james</span><span class="p">)</span><span class="o">.</span><span class="n">date</span> <span class="o">==</span> <span class="s1">&#39;date&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">dict</span><span class="p">(</span><span class="n">james</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">james</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;{&quot;name&quot;: &quot;james&quot;, &quot;date&quot;: &quot;date&quot;, &quot;balance&quot;: 10}&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">VIP</span><span class="p">(</span><span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;VIP&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">])):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="nf">some_method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="s1">&#39;inheritence between classes works as long as members can share&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">vip</span> <span class="o">=</span> <span class="n">VIP</span><span class="p">(</span><span class="n">james</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">vip</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;james&#39;</span> <span class="c1">## members moved seemlessly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">vip</span><span class="o">.</span><span class="n">some_method</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;inheritence between classes works as long as members can share&#39;</span> 
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Adding defaults</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="s1">&#39;today&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>types checking</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">types</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;datetime.datetime&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>casting</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Customer</span> <span class="o">=</span> <span class="n">named_dict</span><span class="p">(</span><span class="s1">&#39;Customer&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;date&#39;</span><span class="p">,</span> <span class="s1">&#39;balance&#39;</span><span class="p">],</span> <span class="n">defaults</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">),</span> <span class="n">types</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="s1">&#39;datetime.datetime&#39;</span><span class="p">),</span> <span class="n">casts</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">balance</span> <span class="o">=</span> <span class="s1">&#39;float&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">james</span> <span class="o">=</span> <span class="n">Customer</span><span class="p">(</span><span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span> <span class="n">balance</span> <span class="o">=</span> <span class="s1">&#39;10.3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">james</span><span class="p">[</span><span class="s1">&#39;balance&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mf">10.3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>name<span class="classifier">str</span></dt><dd><p>name of new class.</p>
</dd>
<dt>keys<span class="classifier">list</span></dt><dd><p>list of keys that the class must have as members.</p>
</dd>
<dt>defaults<span class="classifier">dict, optional</span></dt><dd><p>default values for the keys. The default is {}.</p>
</dd>
<dt>types<span class="classifier">type or callable, optional</span></dt><dd><p>A test to be applied for keys either as a callable or as a type. The default is {}.</p>
</dd>
<dt>casts<span class="classifier">dict, optional</span></dt><dd><p>function. The default is {}.</p>
</dd>
<dt>basedict<span class="classifier">str, optional</span></dt><dd><p>name of the dict class to inherit from. The default is ‘dict’.</p>
</dd>
<dt>debug<span class="classifier">bool, optional</span></dt><dd><p>output the construction text if set to True. The default is False.</p>
</dd>
</dl>
<dl class="simple">
<dt>ValueError</dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>result : new class that inherits from a dict</p>
</dd></dl>

</div>
</div>
<div class="section" id="decorators">
<h2>decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<div class="section" id="wrapper">
<h3>wrapper<a class="headerlink" href="#wrapper" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._decorators.wrapper">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">wrapper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for all decorators. It is similar to functools.wraps but better.
You basically need to define the wrapped method and everything else is handled for you.
- You can then use it either directly to decorate functions
- Or use it to create parameterized decorators
- the __name__, __wrapped__, __doc__ and the getargspec will all be taken care of.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">and_add</span><span class="p">(</span><span class="n">wrapper</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="nf">wrapped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span> <span class="c1">## note that we are assuming self.add exists</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@and_add</span><span class="p">(</span><span class="n">add</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">## create a decorator and decorate the function</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="o">.</span><span class="n">add</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
<p>Alternatively you can also use it this directly:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">and_add</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">add</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Explicit parameter construction</p>
</dd>
</dl>
<p>You can make the init more explict, also adding defaults for the parameters:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">and_add_version_2</span><span class="p">(</span><span class="n">wrapper</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">add</span> <span class="o">=</span> <span class="mi">3</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="nb">super</span><span class="p">(</span><span class="n">and_add</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span><span class="p">,</span> <span class="n">add</span> <span class="o">=</span> <span class="n">add</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">def</span> <span class="nf">wrapped</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">add</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@and_add_version_2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>
</pre></div>
</div>
<p>The decorator is designed to have a single instance of a specific wrapper</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">and_add</span><span class="p">(</span><span class="n">and_add</span><span class="p">(</span><span class="n">f</span><span class="p">))</span> <span class="o">==</span> <span class="n">and_add</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>This holds even for multiple levels of wrapping:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">try_none</span><span class="p">(</span><span class="n">and_add</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">try_none</span><span class="p">(</span><span class="n">and_add</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>        
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">x</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;no can add&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>        
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="timer">
<h3>timer<a class="headerlink" href="#timer" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._decorators.timer">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">timer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">time</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.timer" title="Permalink to this definition">¶</a></dt>
<dd><p>timer is similar to timeit but rather than execution of a Python statement, 
timer wraps a function to make it log its evaluation time before returning output</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function: callable</dt><dd><p>The function to be wraooed</p>
</dd>
<dt>n: int, optional</dt><dd><p>Number of times the function is to be evaluated. Default is 1</p>
</dd>
<dt>time: bool, optional</dt><dd><p>If set to True, function will return the TIME it took to evaluate rather than the original function output.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluate_100</span> <span class="o">=</span> <span class="n">timer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluate_10000</span> <span class="o">=</span> <span class="n">timer</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">time</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">evaluate_10000</span><span class="o">&gt;</span> <span class="n">evaluate_100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">evaluation_time</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="try-value">
<h3>try_value<a class="headerlink" href="#try-value" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._decorators.try_value">
<code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">try_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.try_value" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps a function to try an evaluation. If an exception is thrown, returns a cached argument</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function callable</dt><dd><p>The function we want to decorate</p>
</dd>
<dt>value: </dt><dd><p>If the function fails, it will return value instead. Default is None</p>
</dd>
<dt>verbose: bool</dt><dd><p>If set to True, the logger will warn with the error message.</p>
</dd>
</dl>
<p>There are various convenience functions with specific values
try_zero, try_false, try_true, try_nan and try_none will all return specific values if function fails.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_none</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_none</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;failed&#39;</span><span class="p">)(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;failed&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="try-back">
<h3>try_back<a class="headerlink" href="#try-back" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._decorators.try_back">
<code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">try_back</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.try_back" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps a function to try an evaluation. If an exception is thrown, returns first argument</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">try_back</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span> <span class="ow">and</span> <span class="n">try_back</span><span class="p">(</span><span class="n">f</span><span class="p">)(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="loops">
<h3>loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._loop.loops">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._loop.</code><code class="sig-name descname">loops</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">types</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._loop.loops" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a function to loop over the arguments, depending on the type of the first argument</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nd">@loop</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">))</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">6</span><span class="p">)))</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]));</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span>  <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">res</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>    
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">]));</span> <span class="n">a</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span>  <span class="n">f</span><span class="p">(</span><span class="n">a</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span> <span class="n">res</span> <span class="o">==</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="n">index</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">]))</span>    
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="loop">
<h3>loop<a class="headerlink" href="#loop" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._loop.loop">
<code class="sig-prename descclassname">pyg.base._loop.</code><code class="sig-name descname">loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">types</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._loop.loop" title="Permalink to this definition">¶</a></dt>
<dd><p>returns an instance of loops(types = types)</p>
</dd></dl>

<p>loop_all is an instance of loops that loops over dict, list, tuple, np.ndarray and pandas.DataFrame/Series</p>
</div>
<div class="section" id="kwargs-support">
<h3>kwargs_support<a class="headerlink" href="#kwargs-support" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._decorators.kwargs_support">
<code class="sig-prename descclassname">pyg.base._decorators.</code><code class="sig-name descname">kwargs_support</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._decorators.kwargs_support" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends a function to support <a href="#id19"><span class="problematic" id="id20">**</span></a>kwargs inputs</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nd">@kwargs_support</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">what_is_this</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">not_used</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">ignore_this_too</span> <span class="o">=</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="graphs-cells">
<h2>graphs &amp; cells<a class="headerlink" href="#graphs-cells" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cell">
<h3>cell<a class="headerlink" href="#cell" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._cell.cell">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">output</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell" title="Permalink to this definition">¶</a></dt>
<dd><p>cell is a Dict that can be though of as a node in a calculation graph. 
The nearest parallel is actually an Excel cell:</p>
<ul class="simple">
<li><p>cell contains both its function and its output. cell.output defines the keys where the output is supposed to be</p></li>
<li><p>cell contains reference to all the function outputs</p></li>
<li><p>cell contains its locations and the means to manage its own persistency</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<ul class="simple">
<li><p>function is the function to be called</p></li>
<li><p>** kwargs are the function named key value args. NOTE: NO SUPPORT for <a href="#id21"><span class="problematic" id="id22">*</span></a>args nor <a href="#id23"><span class="problematic" id="id24">**</span></a>kwargs in function</p></li>
<li><p>output: where should the function output go?</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>simple construction</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">a</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">output</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>make output go to ‘value’ key</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>multiple outputs by function</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">sum</span> <span class="o">=</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">prod</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">output</span>  <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;prod&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">c</span><span class="o">.</span><span class="n">sum</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">and</span> <span class="n">c</span><span class="o">.</span><span class="n">prod</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Methods</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<ul class="simple">
<li><p>cell.run() returns bool if cell needs to be run</p></li>
<li><p>cell.go() calculates the cell and returns the function with cell.output keys now populated.</p></li>
<li><p>cell.load()/cell.save() interface for self load/save persistence</p></li>
</ul>
<dl class="py method">
<dt id="pyg.base._cell.cell.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a shallow copy of D<a class="headerlink" href="#pyg.base._cell.cell.copy" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="cell-go">
<h3>cell_go<a class="headerlink" href="#cell-go" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_go">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_go</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">go</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_go" title="Permalink to this definition">¶</a></dt>
<dd><p>cell_go makes a cell run (using cell.go(go)) and returns the calculated cell.
If value is not a cell, value is returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>value<span class="classifier">cell</span></dt><dd><p>The cell (or anything else).</p>
</dd>
<dt>go<span class="classifier">int</span></dt><dd><p>same inputs as per cell.go(go).
0: run if cell.run() is True
1: run this cell regardless, run parent cells only if they need to calculate too
n: run this cell &amp; its nth parents regardless.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>The calculated cell</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>calling non-cells</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_go</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_go</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>calling cells</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_go</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="n">c</span><span class="p">(</span><span class="n">data</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="cell-item">
<h3>cell_item<a class="headerlink" href="#cell-item" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_item">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_item</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_item" title="Permalink to this definition">¶</a></dt>
<dd><p>returns an item from a cell (if not cell, returns back the value).
If no key is provided, will return the output of the cell</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>value<span class="classifier">cell or object or list of cells/objects</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt>key<span class="classifier">str, optional</span></dt><dd><p>The key within cell we are interested in. Note that key is treated as GUIDANCE only. 
Our strong preference is to return valid output from cell_output(cell)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>non cells</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_item</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_item</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>cells, simple</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_item</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cell_item</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">go</span><span class="p">())</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="cell-func">
<h3>cell_func<a class="headerlink" href="#cell-func" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._cell.cell_func">
<code class="sig-prename descclassname">pyg.base._cell.</code><code class="sig-name descname">cell_func</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._cell.cell_func" title="Permalink to this definition">¶</a></dt>
<dd><p>cell_func is a wrapped and wraps a function to act on cells rather than just on values</p>
<p>When called, it will returns not just the function, but also args, kwargs used to call it.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">cell</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span> <span class="n">y</span><span class="o">**</span><span class="mi">3</span><span class="p">,</span> <span class="n">y</span>  <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span> <span class="o">=</span> <span class="n">cell_func</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="bp">self</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">result</span> <span class="o">==</span> <span class="mi">8</span> <span class="o">+</span> <span class="mi">9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">3</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="mi">2</span> <span class="o">**</span> <span class="mi">3</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="encode-and-decode-save-and-load">
<h2>encode and decode/save and load<a class="headerlink" href="#encode-and-decode-save-and-load" title="Permalink to this headline">¶</a></h2>
<div class="section" id="encode">
<h3>encode<a class="headerlink" href="#encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._encode.encode">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encode/decode are performed prior to sending to mongodb or after retrieval from db. 
The idea is to make object embedding in Mongo transparent to the user.</p>
<ul class="simple">
<li><p>We use jsonpickle package to embed general objects. These are encoded as strings and can be decoded as long as the original library exists when decoding.</p></li>
<li><p>pandas.DataFrame are encoded to bytes using pickle while numpy arrays are encoded using the faster array.tobytes() with arrays’ shape &amp; type exposed and searchable.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dict.Dict&quot;}&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">decode</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dict.Dict&quot;}&#39;</span><span class="p">})</span> <span class="o">==</span> <span class="n">Dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._dictable.dictable&quot;}&#39;</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">decode</span><span class="p">(</span><span class="n">encode</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="o">==</span> <span class="n">value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                    <span class="s1">&#39;shape&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">2</span><span class="p">,),</span>
<span class="gp">&gt;&gt;&gt; </span>                                    <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/reduce&quot;: [{&quot;py/type&quot;: &quot;numpy.dtype&quot;}, {&quot;py/tuple&quot;: [&quot;i4&quot;, false, true]}, {&quot;py/tuple&quot;: [3, &quot;&lt;&quot;, null, null, null, -1, -1, 0]}]}&#39;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                                    <span class="s1">&#39;_obj&#39;</span><span class="p">:</span> <span class="s1">&#39;{&quot;py/function&quot;: &quot;pyg.base._encode.bson2np&quot;}&#39;</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>functions and objects</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">ewma</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;{&quot;py/function&quot;: &quot;pyg.timeseries._ewm.ewma&quot;}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encode</span><span class="p">(</span><span class="n">Calendar</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;{&quot;py/type&quot;: &quot;pyg.base._drange.Calendar&quot;}&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>value<span class="classifier">obj</span></dt><dd><p>An object to be encoded</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>A pre-json object</p>
</dd></dl>

</div>
<div class="section" id="decode">
<h3>decode<a class="headerlink" href="#decode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._encode.decode">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">decode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">date</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>decodes a string or an object dict</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>value<span class="classifier">str or dict</span></dt><dd><p>usually a json</p>
</dd>
<dt>date<span class="classifier">None, bool or a regex expression, optional</span></dt><dd><p>date format to be decoded</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>obj</dt><dd><p>the json decoded.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">temp</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">pass</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">orig</span> <span class="o">=</span> <span class="n">temp</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoded</span> <span class="o">=</span> <span class="n">encode</span><span class="p">(</span><span class="n">orig</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">),</span> <span class="n">orig</span><span class="p">)</span> <span class="c1"># type matching too...</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pd-to-parquet">
<h3>pd_to_parquet<a class="headerlink" href="#pd-to-parquet" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._parquet.pd_to_parquet">
<code class="sig-prename descclassname">pyg.base._parquet.</code><code class="sig-name descname">pd_to_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">compression</span><span class="o">=</span><span class="default_value">'GZIP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._parquet.pd_to_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>a small utility to save df to parquet, extending both pd.Series and non-string columns</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="c1">## must have string column names</span>
<span class="go">        df.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span> <span class="c1">## pd.Series has no to_parquet</span>
<span class="go">        s.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;c:/temp/df.parquet&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;c:/temp/series.parquet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">df_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">series_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="pd-read-parquet">
<h3>pd_read_parquet<a class="headerlink" href="#pd-read-parquet" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._parquet.pd_read_parquet">
<code class="sig-prename descclassname">pyg.base._parquet.</code><code class="sig-name descname">pd_read_parquet</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._parquet.pd_read_parquet" title="Permalink to this definition">¶</a></dt>
<dd><p>a small utility to read df/series from parquet, extending both pd.Series and non-string columns</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span> <span class="c1">## must have string column names</span>
<span class="go">        df.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">AttributeError</span><span class="p">):</span> <span class="c1">## pd.Series has no to_parquet</span>
<span class="go">        s.to_parquet(&#39;c:/temp/test.parquet&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="s1">&#39;c:/temp/df.parquet&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">series_path</span> <span class="o">=</span> <span class="n">pd_to_parquet</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;c:/temp/series.parquet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">df_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd_read_parquet</span><span class="p">(</span><span class="n">series_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">df2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">s2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="parquet-encode">
<h3>parquet_encode<a class="headerlink" href="#parquet-encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.parquet_encode">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">parquet_encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em>, <em class="sig-param"><span class="n">compression</span><span class="o">=</span><span class="default_value">'GZIP'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.parquet_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encodes a single DataFrame or a document containing dataframes into a an abject that can be decoded</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>     
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;c:/temp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">other</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoded</span> <span class="o">=</span> <span class="n">parquet_encode</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">][</span><span class="s1">&#39;file&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/n.npy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/data/a/0.parquet&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;df&#39;</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/other/df.parquet&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">decoded</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="csv-encode">
<h3>csv_encode<a class="headerlink" href="#csv-encode" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.mongo._encoders.csv_encode">
<code class="sig-prename descclassname">pyg.mongo._encoders.</code><code class="sig-name descname">csv_encode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.mongo._encoders.csv_encode" title="Permalink to this definition">¶</a></dt>
<dd><p>encodes a single DataFrame or a document containing dataframes into a an abject that can be decoded while saving dataframes into csv</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;c:/temp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])],</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">other</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encoded</span> <span class="o">=</span> <span class="n">csv_encode</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/data/a/0.csv&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">encoded</span><span class="p">[</span><span class="s1">&#39;other&#39;</span><span class="p">][</span><span class="s1">&#39;df&#39;</span><span class="p">][</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;c:/temp/other/df.csv&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">decoded</span> <span class="o">=</span> <span class="n">decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">decoded</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="convertors-to-bytes">
<h3>convertors to bytes<a class="headerlink" href="#convertors-to-bytes" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._encode.pd2bson">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">pd2bson</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.pd2bson" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a value (usually a pandas.DataFrame/Series) to bytes using pickle</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._encode.np2bson">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">np2bson</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.np2bson" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a numpy array to bytes using value.tobytes(). This is much faster than pickle but does not save shape/type info which we save separately.</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._encode.bson2np">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">bson2np</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dtype</span></em>, <em class="sig-param"><span class="n">shape</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.bson2np" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a byte with dtype and shape information into a numpy array.</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._encode.bson2pd">
<code class="sig-prename descclassname">pyg.base._encode.</code><code class="sig-name descname">bson2pd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._encode.bson2pd" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a pickled object back to an object. We insist that new object has .shape to ensure we did not unpickle gibberish.</p>
</dd></dl>

</div>
</div>
<div class="section" id="dates-and-calendar">
<h2>dates and calendar<a class="headerlink" href="#dates-and-calendar" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dt">
<h3>dt<a class="headerlink" href="#dt" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dates.dt">
<code class="sig-prename descclassname">pyg.base._dates.</code><code class="sig-name descname">dt</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">dialect='uk'</em>, <em class="sig-param">none=&lt;built-in method now of type object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dates.dt" title="Permalink to this definition">¶</a></dt>
<dd><p>A more generic constructor for datetime.datetime.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>Simple construction</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span> <span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># name of month</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;jan&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># name of month</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;f&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># future month code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;01-02-2002&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;01-02-2002&#39;</span><span class="p">,</span> <span class="n">dialect</span> <span class="o">=</span> <span class="s1">&#39;US&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;01 March 2002&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;01 March 2002&#39;</span><span class="p">,</span> <span class="n">dialect</span> <span class="o">=</span> <span class="s1">&#39;US&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;01 March 2002 10:20:30&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">20020301</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">37316</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2002</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># excel date</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">730180</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># ordinal for 1/3/2000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">==</span> <span class="mf">951868800.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mf">951868800.0</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># utc timestamp</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">datetime64</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)))</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1">## numpy.datetime64 object</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;march&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># future codes</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>date as offset from today</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">today</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">day</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">today</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">day</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="s1">&#39;-10b&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">today</span> <span class="o">-</span> <span class="mi">14</span> <span class="o">*</span> <span class="n">day</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>datetime arithmetic:</p>
</dd>
</dl>
<p>dt has an interesting logic in implementing datetime arithmentic:</p>
<blockquote>
<div><ul class="simple">
<li><p>day and month parameters can be negative or bigger than the days of month</p></li>
<li><p>dt() will roll back/forward from the date which is valid</p></li>
</ul>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># a day before dt(2000,4,1)</span>
</pre></div>
</div>
<p>and rolling back months:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># a month before dt(2000,1,1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1"># a month after dt(2000,12,1)</span>
</pre></div>
</div>
<p>This may feel unnatural at first, but does allow for much nicer code, e.g.:
[dt(2000,i,1) for i in range(-10,10)]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id25"><span class="problematic" id="id26">*</span></a>args<span class="classifier">str, int or dates</span></dt><dd><p>argument to be converted into dates</p>
</dd>
<dt>dialect<span class="classifier">str, optional</span></dt><dd><p>parsing of 01/02/2020 is it 1st Feb or 2nd Jan? The default is ‘uk’, i.e. dd/mm/yyyy</p>
</dd>
<dt>none<span class="classifier">callable, optional</span></dt><dd><p>What is dt()? The default is datetime.datetime.now()</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="ymd">
<h3>ymd<a class="headerlink" href="#ymd" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dates.ymd">
<code class="sig-prename descclassname">pyg.base._dates.</code><code class="sig-name descname">ymd</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">dialect='uk'</em>, <em class="sig-param">none=&lt;built-in method now of type object&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dates.ymd" title="Permalink to this definition">¶</a></dt>
<dd><p>just like dt() but always returns date only (year/month/date) without fractions.
see dt() for full documentation</p>
<p>datetime.datetime</p>
</dd></dl>

</div>
<div class="section" id="dt-bump">
<h3>dt_bump<a class="headerlink" href="#dt-bump" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dates.dt_bump">
<code class="sig-prename descclassname">pyg.base._dates.</code><code class="sig-name descname">dt_bump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">bumps</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dates.dt_bump" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>  <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">dt_bump</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">drange</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="mi">2</span><span class="p">)))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="drange">
<h3>drange<a class="headerlink" href="#drange" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.drange">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">drange</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bump</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.drange" title="Permalink to this definition">¶</a></dt>
<dd><p>A quick and happy wrapper for dateutil.rrule</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1"># 10 days starting from dt(2000,1,1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="s1">&#39;10b&#39;</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="c1"># weekdays between dt(2000,1,1) and dt(2000,1,17)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="s1">&#39;-10b&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="c1"># business days since 10 bdays ago</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">drange</span><span class="p">(</span><span class="s1">&#39;-10b&#39;</span><span class="p">,</span> <span class="s1">&#39;10b&#39;</span><span class="p">,</span> <span class="s1">&#39;1w&#39;</span><span class="p">)</span> <span class="c1"># starting 10b days ago, to 10b from now, counting in weekly jumps</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>t0<span class="classifier">date, optional</span></dt><dd><p>start date. The default is None.</p>
</dd>
<dt>t1<span class="classifier">date, optional</span></dt><dd><p>end date. The default is None.</p>
</dd>
<dt>bump<span class="classifier">timedelta, int, string, optional</span></dt><dd><p>bump period. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>list of dates</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span> <span class="n">t1</span> <span class="o">=</span> <span class="mi">1999</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bump</span> <span class="o">=</span> <span class="s1">&#39;-1b&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t0</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2020</span><span class="p">);</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">);</span> <span class="n">bump</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span> <span class="o">=</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="date-range">
<h3>date_range<a class="headerlink" href="#date-range" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.date_range">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">date_range</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.date_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="calendar">
<h3>Calendar<a class="headerlink" href="#calendar" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._drange.Calendar">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">Calendar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">holidays</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weekend</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adj</span><span class="o">=</span><span class="default_value">'m'</span></em>, <em class="sig-param"><span class="n">day_start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">day_end</span><span class="o">=</span><span class="default_value">235959</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Calendar is </dt><dd><ul class="simple">
<li><p>a dict</p></li>
<li><p>containing holiday dates</p></li>
<li><p>implementing business day arithmetic</p></li>
</ul>
</dd>
</dl>
<p>Calendar is restricted to operate between cal.t0 and cal.t1 which default to TMIN = 1900 and TMAX = 2300</p>
<dl class="simple">
<dt>Calendar does this by having two key members:</dt><dd><ul class="simple">
<li><p>dt2int: a mapping from all business dates to their integer ‘clock’</p></li>
<li><p>int2dt: a mapping from integer value to the date</p></li>
</ul>
</dd>
</dl>
<p>Since Calendar is an ‘expensive’ memory wise, we assign a key to the calendar and the Calendar is stored in the singleton calendars under this key</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">holidays</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;2012-01-02&#39;</span><span class="p">,</span><span class="s1">&#39;New Year Day&#39;</span><span class="p">,],</span>
<span class="go">                        [2,&#39;2012-01-16&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [3,&#39;2012-02-20&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [4,&#39;2012-05-28&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [5,&#39;2012-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [6,&#39;2012-09-03&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [7,&#39;2012-10-08&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [8,&#39;2012-11-12&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [9,&#39;2012-11-22&#39;,&#39;Thanksgiving Day&#39;,],</span>
<span class="go">                        [10,&#39;2012-12-25&#39;,&#39;Christmas Day&#39;,],</span>
<span class="go">                        [11,&#39;2013-01-01&#39;,&#39;New Year Day&#39;,],</span>
<span class="go">                        [12,&#39;2013-01-21&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [13,&#39;2013-02-18&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [14,&#39;2013-05-27&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [15,&#39;2013-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [16,&#39;2013-09-02&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [17,&#39;2013-10-14&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [18,&#39;2013-11-11&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [19,&#39;2013-11-28&#39;,&#39;Thanksgiving Day&#39;,],</span>
<span class="go">                        [20,&#39;2013-12-25&#39;,&#39;Christmas Day&#39;,],</span>
<span class="go">                        [21,&#39;2014-01-01&#39;,&#39;New Year Day&#39;,],</span>
<span class="go">                        [22,&#39;2014-01-20&#39;,&#39;Martin Luther King Jr. Day&#39;,],</span>
<span class="go">                        [23,&#39;2014-02-17&#39;,&#39;Presidents Day (Washingtons Birthday)&#39;,],</span>
<span class="go">                        [24,&#39;2014-05-26&#39;,&#39;Memorial Day&#39;,],</span>
<span class="go">                        [25,&#39;2014-07-04&#39;,&#39;Independence Day&#39;,],</span>
<span class="go">                        [26,&#39;2014-09-01&#39;,&#39;Labor Day&#39;,],</span>
<span class="go">                        [27,&#39;2014-10-13&#39;,&#39;Columbus Day&#39;,],</span>
<span class="go">                        [28,&#39;2014-11-11&#39;,&#39;Veterans Day&#39;,],</span>
<span class="go">                        [29,&#39;2014-11-27&#39;,&#39;Thanksgiving Day&#39;,],], [&#39;i&#39;, &#39;date&#39;, &#39;name&#39;]).do(dt, &#39;date&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;US&#39;</span><span class="p">,</span> <span class="n">holidays</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="n">t0</span> <span class="o">=</span> <span class="mi">2012</span><span class="p">,</span> <span class="n">t1</span> <span class="o">=</span> <span class="mi">2015</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">cal</span><span class="o">.</span><span class="n">is_bday</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>        <span class="c1"># Labor day</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cached_calendar</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;US&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">cached_calendar</span><span class="o">.</span><span class="n">is_bday</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>   <span class="c1"># Labor day</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">adjust</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">drange</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span> <span class="s1">&#39;1b&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">30</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">),]</span> <span class="c1">## skipped labour day and weekend prior</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cal</span><span class="o">.</span><span class="n">bdays</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span> <span class="o">==</span> <span class="mi">5</span>
</pre></div>
</div>
<dl class="py method">
<dt id="pyg.base._drange.Calendar.adjust">
<code class="sig-name descname">adjust</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span></em>, <em class="sig-param"><span class="n">adj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar.adjust" title="Permalink to this definition">¶</a></dt>
<dd><p>adjust a non-business day to prev/following bussiness date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>date : datetime.
adj : None or p/f/m</p>
<blockquote>
<div><p>adjustment convention: ‘prev/following/modified following’</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>dateime</dt><dd><p>nearby business day</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._drange.Calendar.dt_bump">
<code class="sig-name descname">dt_bump</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span></em>, <em class="sig-param"><span class="n">bump</span></em>, <em class="sig-param"><span class="n">adj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar.dt_bump" title="Permalink to this definition">¶</a></dt>
<dd><p>adds a bump to a date</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>t<span class="classifier">datetime</span></dt><dd><p>date to bump.</p>
</dd>
<dt>bump<span class="classifier">int, str</span></dt><dd><p>bump e.g. ‘-1y’ or ‘1b’ or 3</p>
</dd>
<dt>adj<span class="classifier">adjustement type</span></dt><dd><p>The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>datetime</dt><dd><p>bumped date.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._drange.Calendar.is_trading">
<code class="sig-name descname">is_trading</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar.is_trading" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates if we are within a trading session</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>date<span class="classifier">datetime, optional</span></dt><dd><p>the time &amp; date we want to check. The default is None (i.e. now)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>bool:</dt><dd><p>are we within a trading session</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyg.base._drange.Calendar.trade_date">
<code class="sig-name descname">trade_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">date</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">adj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.Calendar.trade_date" title="Permalink to this definition">¶</a></dt>
<dd><p>This is very similar for adjust, but it also takes into account the time of the day.
if day_start = 0 and day_end = 23:59:59 then this is exactly adjust.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>date<span class="classifier">datetime, optional</span></dt><dd><p>date (with time). The default is None.</p>
</dd>
<dt>adj<span class="classifier">f/p, optional</span></dt><dd><p>If date isn’t within trading day, which direction to adjust to? The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">datetime</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">uk</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;UK&#39;</span><span class="p">,</span> <span class="n">day_start</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">day_end</span> <span class="o">=</span> <span class="mi">17</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday morning rolls into Tuesday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Tuesday morning back into Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Sunday rolls into Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Sunday rolls back to Friday</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># Tuesday eve rolls into Wed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday eve back into Tuesday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Sunday rolls into Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Sunday rolls back to Friday</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday is Tuesday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">uk</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">12</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday is Tuesday</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">au</span> <span class="o">=</span> <span class="n">calendar</span><span class="p">(</span><span class="s1">&#39;AU&#39;</span><span class="p">,</span> <span class="n">day_start</span> <span class="o">=</span> <span class="mi">2230</span><span class="p">,</span> <span class="n">day_end</span> <span class="o">=</span> <span class="mi">1300</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday morning in session</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># Tuesday morning in session</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Sunday rolls into Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># Sunday rolls back to Friday</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># Tuesday eve rolls into Wed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># Already in Wed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Sunday rolls into Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Already on Monday</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">23</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>  <span class="c1"># Friday afternoon rolls into Monday</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">14</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># Tuesday is over, roll to Wed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">au</span><span class="o">.</span><span class="n">trade_date</span><span class="p">(</span><span class="n">date</span> <span class="o">=</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">14</span><span class="p">),</span> <span class="n">adj</span> <span class="o">=</span> <span class="s1">&#39;p&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">dt</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>  <span class="c1"># roll back to Tues</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id27">
<h3>calendar<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.calendar">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">calendar</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">key</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">holidays</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weekend</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t0</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t1</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">day_start</span><span class="o">=</span><span class="default_value">0</span></em>, <em class="sig-param"><span class="n">day_end</span><span class="o">=</span><span class="default_value">235959</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.calendar" title="Permalink to this definition">¶</a></dt>
<dd><p>A function to returns either an existing calendar or construct a new one.
- calendar(‘US’) will return a US calendar if that is already cached
- calendar(‘US’, us_holiday_dates) will construct a calendar with holiday dates and then cache it</p>
</dd></dl>

</div>
<div class="section" id="as-time">
<h3>as_time<a class="headerlink" href="#as-time" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.as_time">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">as_time</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.as_time" title="Permalink to this definition">¶</a></dt>
<dd><p>parses t into a datetime.time object</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="s1">&#39;10:30:40&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="s1">&#39;103040&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="s1">&#39;10:30&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="s1">&#39;1030&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="s1">&#39;05&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="mi">103040</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="mi">13040</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="mi">130</span><span class="p">)</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_time</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">time</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>t<span class="classifier">str/int/datetime.time/datetime.datetime</span></dt><dd><p>time of day</p>
</dd>
</dl>
<p>datetime.time</p>
</dd></dl>

</div>
<div class="section" id="clock">
<h3>clock<a class="headerlink" href="#clock" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._drange.clock">
<code class="sig-prename descclassname">pyg.base._drange.</code><code class="sig-name descname">clock</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ts</span></em>, <em class="sig-param"><span class="n">time</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">t</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._drange.clock" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a vector marking the passage of time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>ts : timeseries
time : None, a string or a Calendar, or already a timeseries of times</p>
<blockquote>
<div><p>None: Will increment by 1 every non-nan observation
‘i’ : increment by 1 every date in index (nan or not)
‘b’ : weekdays distance
‘d’ : day-distance (ignore intraday stamp)
‘f’ : fraction-of-day-distance (do not ignore intraday stamp)
‘m’ : month-distance
‘q’ : quarter-distance
‘y’ : year-distance
calendar: uses the business-days distance between any two dates</p>
</div></blockquote>
<p>t: starting time in the past.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>an array </dt><dd><p>an increasing array of time such that distance between points match the above.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">))),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">9</span><span class="p">)),</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">26090</span><span class="p">,</span> <span class="mi">26090</span><span class="p">,</span> <span class="mi">26090</span><span class="p">,</span> <span class="mi">26091</span><span class="p">,</span> <span class="mi">26092</span><span class="p">,</span> <span class="mi">26093</span><span class="p">,</span> <span class="mi">26094</span><span class="p">,</span> <span class="mi">26095</span><span class="p">,</span> <span class="mi">26095</span><span class="p">,</span> <span class="mi">26095</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="n">drange</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="s1">&#39;9b&#39;</span><span class="p">,</span> <span class="s1">&#39;1b&#39;</span><span class="p">)),</span> <span class="s1">&#39;b&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">26090</span><span class="p">,</span> <span class="mi">26100</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">)),</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">clock</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s1">&#39;i&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="text-manipulation">
<h2>text manipulation<a class="headerlink" href="#text-manipulation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="lower">
<h3>lower<a class="headerlink" href="#lower" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.lower">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">lower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.lower" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to txt.lower() but:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>supports lists/dicts</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lower</span><span class="p">([</span><span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;the brown fox&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">lower</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">))</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;the brown fox&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="upper">
<h3>upper<a class="headerlink" href="#upper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.upper">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">upper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.upper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to txt.upper() but:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>supports lists/dicts</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">upper</span><span class="p">([</span><span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;THE BROWN FOX&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">upper</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">))</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;THE BROWN FOX&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="proper">
<h3>proper<a class="headerlink" href="#proper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.proper">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">proper</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.proper" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to Excel’s PROPER(txt) but:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>supports lists/dicts</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">proper</span><span class="p">([</span><span class="s1">&#39;THE BROWN FOX&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">proper</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;THE BROWN FOX&#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">))</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;The Brown Fox&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="capitalize">
<h3>capitalize<a class="headerlink" href="#capitalize" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.capitalize">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">capitalize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.capitalize" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to text.capitalize() but:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>supports lists/dicts</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">capitalize</span><span class="p">(</span><span class="s1">&#39;alan howard&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;Alan howard&#39;</span> <span class="c1"># use proper to get Alan Howard</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">capitalize</span><span class="p">([</span><span class="s1">&#39;alan howard&#39;</span><span class="p">,</span> <span class="s1">&#39;donald trump&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;Alan howard&#39;</span><span class="p">,</span> <span class="s1">&#39;Donald trump&#39;</span><span class="p">]</span> <span class="c1"># use proper?</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="strip">
<h3>strip<a class="headerlink" href="#strip" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.strip">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">strip</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.strip" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to txt.strip() but:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>supports lists/dicts</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">strip</span><span class="p">([</span><span class="s1">&#39; whatever you say  &#39;</span><span class="p">,</span><span class="s1">&#39;  whatever you do..   &#39;</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;whatever you say&#39;</span><span class="p">,</span> <span class="s1">&#39;whatever you do..&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">strip</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39; whatever you say  &#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">))</span> <span class="o">==</span>  <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;whatever you say&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="split">
<h3>split<a class="headerlink" href="#split" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.split">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">split</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">sep</span><span class="o">=</span><span class="default_value">' '</span></em>, <em class="sig-param"><span class="n">dedup</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.split" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>equivalent to txt.split(sep) but supporsts:</dt><dd><ul class="simple">
<li><p>does not throw on non-string</p></li>
<li><p>removal of multiple seps</p></li>
<li><p>ensuring there is a unique single separator</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>text<span class="classifier">str</span></dt><dd><p>text to be stipped.</p>
</dd>
<dt>sep<span class="classifier">str, list of str, optional</span></dt><dd><p>text used to strip. The default is ‘ ‘.</p>
</dd>
<dt>dedup<span class="classifier">bool, optional</span></dt><dd><p>If True, will remove duplicated instances of seps. The default is False.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>str</dt><dd><p>splitted text</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;   The quick... brown .. fox... &#39;</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">split</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;The&#39;</span><span class="p">,</span> <span class="s1">&#39;quick...&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">,</span> <span class="s1">&#39;fox...&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">split</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;The&#39;</span><span class="p">,</span> <span class="s1">&#39;quick&#39;</span><span class="p">,</span> <span class="s1">&#39;brown&#39;</span><span class="p">,</span> <span class="s1">&#39;fox&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">text</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;Can split this&#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;..and split this too&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">split</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">],</span> <span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Can&#39;</span><span class="p">,</span> <span class="s1">&#39;split&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">],</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;and&#39;</span><span class="p">,</span> <span class="s1">&#39;split&#39;</span><span class="p">,</span> <span class="s1">&#39;this&#39;</span><span class="p">,</span> <span class="s1">&#39;too&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="replace">
<h3>replace<a class="headerlink" href="#replace" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.replace">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">replace</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">text</span></em>, <em class="sig-param"><span class="n">old</span></em>, <em class="sig-param"><span class="n">new</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>A souped up version of text.replace(old, new)</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>replace continues to replace until no-more is found</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">replace</span><span class="p">(</span><span class="s1">&#39;this    has lots  of   double    spaces&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;this has lots of double spaces&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">replace</span><span class="p">(</span><span class="s1">&#39;this, sentence? has! too, many, punctuations!&#39;</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;,?!.&#39;</span><span class="p">))</span> <span class="o">==</span> <span class="s1">&#39;this sentence has too many punctuations&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">replace</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39; text within a list &#39;</span><span class="p">,</span> <span class="s1">&#39;and within a dict&#39;</span><span class="p">]),</span> <span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;textwithinalist&#39;</span><span class="p">,</span> <span class="s1">&#39;andwithinadict&#39;</span><span class="p">]}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="common-prefix">
<h3>common_prefix<a class="headerlink" href="#common-prefix" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._txt.common_prefix">
<code class="sig-prename descclassname">pyg.base._txt.</code><code class="sig-name descname">common_prefix</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._txt.common_prefix" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id28"><span class="problematic" id="id29">*</span></a>values<span class="classifier">list of iterables</span></dt><dd><p>values for which we want to find common prefix</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>iterable</dt><dd><p>the common prefix.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">common_prefix</span><span class="p">([</span><span class="s1">&#39;abra&#39;</span><span class="p">,</span> <span class="s1">&#39;abba&#39;</span><span class="p">,</span> <span class="s1">&#39;abacus&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">common_prefix</span><span class="p">(</span><span class="s1">&#39;abra&#39;</span><span class="p">,</span> <span class="s1">&#39;abba&#39;</span><span class="p">,</span> <span class="s1">&#39;abacus&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ab&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">common_prefix</span><span class="p">()</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">common_prefix</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="files-directory">
<h2>files &amp; directory<a class="headerlink" href="#files-directory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mkdir">
<h3>mkdir<a class="headerlink" href="#mkdir" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._file.mkdir">
<code class="sig-prename descclassname">pyg.base._file.</code><code class="sig-name descname">mkdir</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._file.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>makes a new directory if not exists. It works if path is a filename too.</p>
</dd></dl>

</div>
<div class="section" id="read-csv">
<h3>read_csv<a class="headerlink" href="#read-csv" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._file.read_csv">
<code class="sig-prename descclassname">pyg.base._file.</code><code class="sig-name descname">read_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._file.read_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>light-weight csv reader, unlike pandas heavy duty :-)</p>
</dd></dl>

</div>
</div>
<div class="section" id="tree-manipulation">
<h2>tree manipulation<a class="headerlink" href="#tree-manipulation" title="Permalink to this headline">¶</a></h2>
<p>Trees are dicts of dicts. just like an item in a dict is (key, value), tree items are just longer tuples: (key1, key2, key3, value)</p>
<div class="section" id="tree-to-items">
<h3>tree_to_items<a class="headerlink" href="#tree-to-items" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dict.tree_to_items">
<code class="sig-prename descclassname">pyg.base._dict.</code><code class="sig-name descname">tree_to_items</code><span class="sig-paren">(</span><em class="sig-param">tree</em>, <em class="sig-param">types=(&lt;class 'dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dict.Dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dictattr.dictattr'&gt;)</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.tree_to_items" title="Permalink to this definition">¶</a></dt>
<dd><p>An extension of dict.items(), returning a list of tuples but of varying length, each a branch of a tree</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tree<span class="classifier">dict of dicts</span></dt><dd><p>a tree of data.</p>
</dd>
<dt>types<span class="classifier">dict or a list of dict-types, optional</span></dt><dd><p>The types that we consider as ‘branches’ of the tree. Default is (dict, Dict, dictattr).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>a list of tuples</dt><dd><p>these are an extension of dict.items() and are of varying length</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">school</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">pupils</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">id1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;maxwell&#39;</span><span class="p">,</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span>
<span class="go">                      id2 = dict(name = &#39;adam&#39;, surname = &#39;smith&#39;, gender = &#39;m&#39;),</span>
<span class="go">                      id3 = dict(name = &#39;michell&#39;, surname = &#39;obama&#39;, gender = &#39;f&#39;),</span>
<span class="go">                      ),</span>
<span class="go">        teachers = dict(math = dict(name = &#39;albert&#39;, surname = &#39;einstein&#39;, grade = 3),</span>
<span class="go">                        english = dict(name = &#39;william&#39;, surname = &#39;shakespeare&#39;, grade = 3),</span>
<span class="go">                        physics = dict(name = &#39;richard&#39;, surname = &#39;feyman&#39;, grade = 4)</span>
<span class="go">                        ))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="n">tree_to_items</span><span class="p">(</span><span class="n">school</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> 
</pre></div>
</div>
<dl class="simple">
<dt>[(‘pupils’, ‘id1’, ‘name’, ‘james’),</dt><dd><p>(‘pupils’, ‘id1’, ‘surname’, ‘maxwell’),
(‘pupils’, ‘id1’, ‘gender’, ‘m’),
(‘pupils’, ‘id2’, ‘name’, ‘adam’),
(‘pupils’, ‘id2’, ‘surname’, ‘smith’),
(‘pupils’, ‘id2’, ‘gender’, ‘m’),
(‘pupils’, ‘id3’, ‘name’, ‘michell’),
(‘pupils’, ‘id3’, ‘surname’, ‘obama’),
(‘pupils’, ‘id3’, ‘gender’, ‘f’),
(‘teachers’, ‘math’, ‘name’, ‘albert’),
(‘teachers’, ‘math’, ‘surname’, ‘einstein’),
(‘teachers’, ‘math’, ‘grade’, 3),
(‘teachers’, ‘english’, ‘name’, ‘william’),
(‘teachers’, ‘english’, ‘surname’, ‘shakespeare’),
(‘teachers’, ‘english’, ‘grade’, 3),
(‘teachers’, ‘physics’, ‘name’, ‘richard’),
(‘teachers’, ‘physics’, ‘surname’, ‘feyman’),
(‘teachers’, ‘physics’, ‘grade’, 4)]</p>
</dd>
</dl>
<p>#To reverse this, we call:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">items_to_tree</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">==</span> <span class="n">school</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="items-to-tree">
<h3>items_to_tree<a class="headerlink" href="#items-to-tree" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dict.items_to_tree">
<code class="sig-prename descclassname">pyg.base._dict.</code><code class="sig-name descname">items_to_tree</code><span class="sig-paren">(</span><em class="sig-param">items</em>, <em class="sig-param">tree=None</em>, <em class="sig-param">raise_if_duplicate=True</em>, <em class="sig-param">ignore=None</em>, <em class="sig-param">types=(&lt;class 'dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dict.Dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dictattr.dictattr'&gt;)</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.items_to_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>converts <strong>items</strong> to branches of a tree. 
If an original <strong>tree</strong> is provided, hang the additional branches on the existing tree
If <strong>ignore</strong> is provided as a list of values, will not overwrite branches with last value (the leaf) in these values</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">items</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;cambridge&#39;</span><span class="p">,</span> <span class="s1">&#39;smith&#39;</span><span class="p">,</span> <span class="s1">&#39;economics&#39;</span><span class="p">,),</span>
<span class="go">         (&#39;cambridge&#39;, &#39;keynes&#39;, &#39;economics&#39;), </span>
<span class="go">         (&#39;cambridge&#39;, &#39;lyons&#39;,  &#39;maths&#39;),</span>
<span class="go">         (&#39;cambridge&#39;, &#39;maxwell&#39;, &#39;maths&#39;),</span>
<span class="go">         (&#39;oxford&#39;, &#39;penrose&#39;, &#39;maths&#39;),</span>
<span class="go">         ]</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">items_to_tree</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree_repr</span><span class="p">(</span><span class="n">tree</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">cambridge</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">smith</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">economics</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">keynes</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">economics</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">lyons</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">maths</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">maxwell</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>        <span class="n">maths</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oxford</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="p">{</span><span class="s1">&#39;penrose&#39;</span><span class="p">:</span> <span class="s1">&#39;maths&#39;</span><span class="p">}</span>
</pre></div>
</div>
<p>We can add to tree:</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>items<span class="classifier">list of tuples, </span></dt><dd><p>items are just like dict items, only longer,</p>
</dd>
<dt>tree<span class="classifier">tree, optional</span></dt><dd><p>a pre-existing tree of trees. The default is None.</p>
</dd>
<dt>raise_if_duplicate<span class="classifier">TYPE, optional</span></dt><dd><p>DESCRIPTION. The default is True.</p>
</dd>
<dt>ignore<span class="classifier">list, optional</span></dt><dd><p>list of values that when over-writing an existing tree, should ignore. The default is None.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using ignore</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;keep_old_value&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">update</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="s1">&#39;valid_new_value&#39;</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree_update</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">valid_new_value</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;keep_old_value&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>a is over-ridden as the new value is valid</p></li>
<li><p>b is not over-ridden since the update b = None is considereed invalid</p></li>
<li><p>c is added as it did not exist before, even though c = None is invalid value</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>tree : dict of dicts</p>
</dd></dl>

</div>
<div class="section" id="tree-update">
<h3>tree_update<a class="headerlink" href="#tree-update" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._dict.tree_update">
<code class="sig-prename descclassname">pyg.base._dict.</code><code class="sig-name descname">tree_update</code><span class="sig-paren">(</span><em class="sig-param">tree</em>, <em class="sig-param">update</em>, <em class="sig-param">types=(&lt;class 'dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dict.Dict'&gt;</em>, <em class="sig-param">&lt;class 'pyg.base._dictattr.dictattr'&gt;)</em>, <em class="sig-param">ignore=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._dict.tree_update" title="Permalink to this definition">¶</a></dt>
<dd><p>equivalent to dict.update() except: not in-place and also updates further down the tree</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ranking</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">cambridge</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">trinity</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">stjohns</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">christ</span> <span class="o">=</span> <span class="mi">3</span><span class="p">),</span> 
<span class="go">            oxford = dict(trinity = 1, jesus = 2, magdalene = 3))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_ranking</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">oxford</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">wolfson</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">magdalene</span> <span class="o">=</span> <span class="mi">4</span><span class="p">))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree_repr</span><span class="p">(</span><span class="n">tree_update</span><span class="p">(</span><span class="n">ranking</span><span class="p">,</span> <span class="n">new_ranking</span><span class="p">)))</span>
</pre></div>
</div>
<dl class="simple">
<dt>cambridge:</dt><dd><p>{‘trinity’: 1, ‘stjohns’: 2, ‘christ’: 3}</p>
</dd>
<dt>oxford:</dt><dd><p>{‘trinity’: 1, ‘jesus’: 2, ‘magdalene’: 4, ‘wolfson’: 3}</p>
</dd>
</dl>
<p>Note how values for magdalene in Oxford were overwritten even though they are further down the tree</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using ignore</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">update</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tree_update</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">update</span><span class="p">)</span> <span class="o">==</span> <span class="n">update</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tree_update</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">])</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tree_update</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">tree_update</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span> <span class="n">update</span><span class="p">,</span> <span class="n">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="n">tree</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tree<span class="classifier">tree</span></dt><dd><p>existing tree.</p>
</dd>
<dt>update<span class="classifier">tree</span></dt><dd><p>new information.</p>
</dd>
<dt>types<span class="classifier">types, optional</span></dt><dd><p>see tree_to_items. The default is (dict, Dict, dictattr).</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tree</dt><dd><p>updated tree.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tree-to-table">
<h3>tree_to_table<a class="headerlink" href="#tree-to-table" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._tree.tree_to_table">
<code class="sig-prename descclassname">pyg.base._tree.</code><code class="sig-name descname">tree_to_table</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">tree</span></em>, <em class="sig-param"><span class="n">pattern</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._tree.tree_to_table" title="Permalink to this definition">¶</a></dt>
<dd><p>The best way to understand is to give an example:</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">school</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">pupils</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">id1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;maxwell&#39;</span><span class="p">,</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span>
<span class="go">                          id2 = dict(name = &#39;adam&#39;, surname = &#39;smith&#39;, gender = &#39;m&#39;),</span>
<span class="go">                          id3 = dict(name = &#39;michell&#39;, surname = &#39;obama&#39;, gender = &#39;f&#39;),</span>
<span class="go">                          ),</span>
<span class="go">            teachers = dict(math = dict(name = &#39;albert&#39;, surname = &#39;einstein&#39;, grade = 3),</span>
<span class="go">                            english = dict(name = &#39;william&#39;, surname = &#39;shakespeare&#39;, grade = 3),</span>
<span class="go">                            physics = dict(name = &#39;richard&#39;, surname = &#39;feyman&#39;, grade = 4)</span>
<span class="go">                            ))</span>
</pre></div>
</div>
<p>Suppose we wanted to identify all male students:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">tree_to_table</span><span class="p">(</span><span class="n">school</span><span class="p">,</span> <span class="s1">&#39;pupils/</span><span class="si">%i</span><span class="s1">d/gender/m&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">res</span> <span class="o">==</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;id1&#39;</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;id2&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>or grades:
&gt;&gt;&gt; res = tree_to_table(school, ‘teachers/%subject/grade/%grade’)
&gt;&gt;&gt; assert res == [{‘grade’: 3, ‘subject’: ‘math’},</p>
<blockquote>
<div><p>{‘grade’: 3, ‘subject’: ‘english’},
{‘grade’: 4, ‘subject’: ‘physics’}]</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tree<span class="classifier">tree (dict of dicts)</span></dt><dd><p>tree is a yaml-like structure</p>
</dd>
<dt>pattern<span class="classifier">string</span></dt><dd><p>The pattern whose instances we wish to find in tree</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>list of dicts</p>
</dd></dl>

</div>
<div class="section" id="tree-repr">
<h3>tree_repr<a class="headerlink" href="#tree-repr" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._tree_repr.tree_repr">
<code class="sig-prename descclassname">pyg.base._tree_repr.</code><code class="sig-name descname">tree_repr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">offset</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._tree_repr.tree_repr" title="Permalink to this definition">¶</a></dt>
<dd><p>a cleaner representation of a tree</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">school</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">pupils</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">id1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;james&#39;</span><span class="p">,</span> <span class="n">surname</span> <span class="o">=</span> <span class="s1">&#39;maxwell&#39;</span><span class="p">,</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">&#39;m&#39;</span><span class="p">),</span>
<span class="go">                  id2 = dict(name = &#39;adam&#39;, surname = &#39;smith&#39;, gender = &#39;m&#39;),</span>
<span class="go">                  id3 = dict(name = &#39;michell&#39;, surname = &#39;obama&#39;, gender = &#39;f&#39;),</span>
<span class="go">                  ),</span>
<span class="go">    teachers = dict(math = dict(name = &#39;albert&#39;, surname = &#39;einstein&#39;, grade = 3),</span>
<span class="go">                    english = dict(name = &#39;william&#39;, surname = &#39;shakespeare&#39;, grade = 3),</span>
<span class="go">                    physics = dict(name = &#39;richard&#39;, surname = &#39;feyman&#39;, grade = 4)</span>
<span class="go">                    ))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">tree_repr</span><span class="p">(</span><span class="n">school</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="go">pupils:</span>
<span class="go">    id1:</span>
<span class="go">        {&#39;name&#39;: &#39;james&#39;, &#39;surname&#39;: &#39;maxwell&#39;, &#39;gender&#39;: &#39;m&#39;}</span>
<span class="go">    id2:</span>
<span class="go">        {&#39;name&#39;: &#39;adam&#39;, &#39;surname&#39;: &#39;smith&#39;, &#39;gender&#39;: &#39;m&#39;}</span>
<span class="go">    id3:</span>
<span class="go">        {&#39;name&#39;: &#39;michell&#39;, &#39;surname&#39;: &#39;obama&#39;, &#39;gender&#39;: &#39;f&#39;}</span>
<span class="go">teachers:</span>
<span class="go">    math:</span>
<span class="go">        {&#39;name&#39;: &#39;albert&#39;, &#39;surname&#39;: &#39;einstein&#39;, &#39;grade&#39;: 3}</span>
<span class="go">    english:</span>
<span class="go">        {&#39;name&#39;: &#39;william&#39;, &#39;surname&#39;: &#39;shakespeare&#39;, &#39;grade&#39;: 3}</span>
<span class="go">    physics:</span>
<span class="go">        {&#39;name&#39;: &#39;richard&#39;, &#39;surname&#39;: &#39;feyman&#39;, &#39;grade&#39;: 4}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>value : a tree</p>
<dl class="simple">
<dt>offset<span class="classifier">int, optional</span></dt><dd><p>offset from the left for printing. The default is 0.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>TYPE</dt><dd><p>DESCRIPTION.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="list-functions">
<h2>list functions<a class="headerlink" href="#list-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="as-list">
<h3>as_list<a class="headerlink" href="#as-list" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._as_list.as_list">
<code class="sig-prename descclassname">pyg.base._as_list.</code><code class="sig-name descname">as_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">none</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._as_list.as_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of the original object.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_list</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_list</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_list</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,))</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_list</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,])</span> <span class="o">==</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">as_list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,]))</span> <span class="p">,</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_list</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)]</span>
</pre></div>
</div>
<p>In practice, this function is has an incredible useful usage:</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using as_list to give flexibility on <a href="#id30"><span class="problematic" id="id31">*</span></a>args</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">values</span> <span class="o">=</span> <span class="n">as_list</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">my_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="mi">6</span> <span class="c1">## This is nice... wasn&#39;t possible before</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>value : anything
none : bool optional</p>
<blockquote>
<div><p>Shall I return None as a value? The default is False and we return [], if True, returns [None]</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>list</dt><dd><p>a list of original objects.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="as-tuple">
<h3>as_tuple<a class="headerlink" href="#as-tuple" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._as_list.as_tuple">
<code class="sig-prename descclassname">pyg.base._as_list.</code><code class="sig-name descname">as_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">none</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._as_list.as_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a tuple of the original object.</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_tuple</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_tuple</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="mi">4</span><span class="p">,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_tuple</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,))</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_tuple</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,])</span> <span class="o">==</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">as_tuple</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,]))</span> <span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,]),))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_tuple</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">),)</span>
</pre></div>
</div>
<p>In practice, this function is has an incredible useful usage:</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>using as_list to give flexibility on <a href="#id32"><span class="problematic" id="id33">*</span></a>args</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">my_sum</span><span class="p">(</span><span class="o">*</span><span class="n">values</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">values</span> <span class="o">=</span> <span class="n">as_tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">my_sum</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">my_sum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span> <span class="o">==</span> <span class="mi">6</span> <span class="c1">## This is nice... wasn&#39;t possible before</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>value : anything
none : bool optional</p>
<blockquote>
<div><p>Shall I return None as a value? The default is False and we return [], if True, returns [None]</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tuple</dt><dd><p>a tuple of original objects.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="first">
<h3>first<a class="headerlink" href="#first" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._as_list.first">
<code class="sig-prename descclassname">pyg.base._as_list.</code><code class="sig-name descname">first</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._as_list.first" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the first value in a list (None if empty list) or the original if value not a list</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">first</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">first</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">first</span><span class="p">([])</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">first</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="last">
<h3>last<a class="headerlink" href="#last" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._as_list.last">
<code class="sig-prename descclassname">pyg.base._as_list.</code><code class="sig-name descname">last</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._as_list.last" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the last value in a list (None if empty list) or the original if value not a list</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">last</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">last</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">last</span><span class="p">([])</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">last</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="unique">
<h3>unique<a class="headerlink" href="#unique" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._as_list.unique">
<code class="sig-prename descclassname">pyg.base._as_list.</code><code class="sig-name descname">unique</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._as_list.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the asserted unique value in a list (None if empty list) or the original if value not a list. 
Throws an exception if list non-unique</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">unique</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">unique</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">unique</span><span class="p">([])</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">unique</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>  
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="comparing-and-sorting">
<h2>Comparing and Sorting<a class="headerlink" href="#comparing-and-sorting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cmp">
<h3>cmp<a class="headerlink" href="#cmp" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._sort.cmp">
<code class="sig-prename descclassname">pyg.base._sort.</code><code class="sig-name descname">cmp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._sort.cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements lexcompare while allowing for comparison of different types.
First compares by type, then by length, then by keys and finally on values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>x<span class="classifier">obj</span></dt><dd><p>1st object to be compared.</p>
</dd>
<dt>y<span class="classifier">obj</span></dt><dd><p>2nd object to be compared.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>int</dt><dd><p>returns -1 if x&lt;y else 1 if x&gt;y else 0</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="c1"># None is smallest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1"># [1,2,3] is longer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1"># lexical sorting </span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="c1"># lexical sorting on keys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">cmp</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">))</span> <span class="o">==</span> <span class="mi">0</span> <span class="c1"># order does not matter</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="id34">
<h3>Cmp<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._sort.Cmp">
<code class="sig-prename descclassname">pyg.base._sort.</code><code class="sig-name descname">Cmp</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._sort.Cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>class wrapper of cmp, allowing us to compare objects of different types</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">sorted</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="kc">None</span><span class="p">])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># but this is fine:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">sorted</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kc">None</span><span class="p">],</span> <span class="n">key</span> <span class="o">=</span> <span class="n">Cmp</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="sort">
<h3>sort<a class="headerlink" href="#sort" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._sort.sort">
<code class="sig-prename descclassname">pyg.base._sort.</code><code class="sig-name descname">sort</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">iterable</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._sort.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>implements sorting allowing for comparing of not-same-type objects</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>iterable<span class="classifier">iterable</span></dt><dd><p>values to be sorted</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>list</dt><dd><p>sorted list.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="nb">sorted</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="kc">None</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># but this is fine:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sort</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="kc">None</span><span class="p">])</span> <span class="o">==</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="eq">
<h3>eq<a class="headerlink" href="#eq" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._eq.eq">
<code class="sig-prename descclassname">pyg.base._eq.</code><code class="sig-name descname">eq</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">y</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._eq.eq" title="Permalink to this definition">¶</a></dt>
<dd><p>A better nan-handling equality comparison. Here is the problem:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>  <span class="c1">## What?</span>
</pre></div>
</div>
<p>The nan issue extends to np.arrays…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]</span>
</pre></div>
</div>
<p>but not to lists…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span> <span class="o">==</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]</span>
</pre></div>
</div>
<p>But wait, if the lists are derived from np.arrays, then no equality…</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]))</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]))</span>
</pre></div>
</div>
<p>The other issue is inheritance:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">FunnyDict</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>   <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>       <span class="k">return</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="n">FunnyDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="c1">## equality seems to ignore any type mismatch</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">FunnyDict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span> 
</pre></div>
</div>
<p>There are also issues with partial</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">x</span> <span class="o">==</span> <span class="n">y</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="n">eq</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span> <span class="c1">## That&#39;s better</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">))</span> <span class="p">,</span>  <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">],</span> <span class="n">dtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]))</span> <span class="p">,</span>  <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]),</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">]))]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span><span class="mi">2</span><span class="p">]))]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">eq</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">),</span> <span class="n">FunnyDict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">y</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">eq</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]),</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="in">
<h3><a class="reference internal" href="#in">in</a><a class="headerlink" href="#in" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._eq.in_">
<code class="sig-prename descclassname">pyg.base._eq.</code><code class="sig-name descname">in_</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">x</span></em>, <em class="sig-param"><span class="n">seq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._eq.in_" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates if x is in seq, avoiding issues such as these:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">s</span> <span class="ow">in</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">in_</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">in_</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">s</span><span class="p">])</span>    
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="bits-and-pieces">
<h2>bits and pieces<a class="headerlink" href="#bits-and-pieces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-pyg.base._types">
<span id="type-functions"></span><h3>type functions<a class="headerlink" href="#module-pyg.base._types" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._types.is_arr">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_arr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a numpy array of non-zero-size</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_bool">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_bool</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a Bool, or a <a href="#id43"><span class="problematic" id="id44">np.bool_</span></a> type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_date">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_date</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_date" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a date type: either datetime.date, datetime.datetime or np.datetime64</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_df">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_df</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_df" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.DataFrame</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_dict">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a dict</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_float">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_float</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_float" title="Permalink to this definition">¶</a></dt>
<dd><p>is value an float, or any variant of np.float</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_int">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_int</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_int" title="Permalink to this definition">¶</a></dt>
<dd><p>is value an int, or any variant of np.intN type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_iterable">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_iterable</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>is value Iterable excluding a string</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_len">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_len</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_len" title="Permalink to this definition">¶</a></dt>
<dd><p>is value of zero length (or has no len at all)</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_list">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_list" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a list</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_nan">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_nan</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a nan or an inf. Unlike np.isnan, works for non numeric</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_none">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_none" title="Permalink to this definition">¶</a></dt>
<dd><p>is value None</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_num">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_num</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_num" title="Permalink to this definition">¶</a></dt>
<dd><p>is _int(value) or is_float(value)</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_pd">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_pd</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_pd" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.DataFrame/pd.Series</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_series">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_series</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_series" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pd.Series</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_str">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_str</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_str" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a str, or a <a href="#id45"><span class="problematic" id="id46">np.str_</span></a> type</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_ts">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_ts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_ts" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a pandas datafrome whch is indexed by datetimes</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.is_tuple">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">is_tuple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.is_tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>is value a tuple</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._types.nan2none">
<code class="sig-prename descclassname">pyg.base._types.</code><code class="sig-name descname">nan2none</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._types.nan2none" title="Permalink to this definition">¶</a></dt>
<dd><p>convert np.nan/np.inf to None</p>
</dd></dl>

</div>
<div class="section" id="zipper">
<h3>zipper<a class="headerlink" href="#zipper" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._zip.zipper">
<code class="sig-prename descclassname">pyg.base._zip.</code><code class="sig-name descname">zipper</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">values</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._zip.zipper" title="Permalink to this definition">¶</a></dt>
<dd><p>a safer version of zip</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p>zipper works with single values as well as full list:</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="mi">4</span><span class="p">))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]))</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">]))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">],</span> <span class="kc">None</span><span class="p">))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">list</span><span class="p">(</span><span class="n">zipper</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]),</span> <span class="kc">None</span><span class="p">))</span> <span class="o">==</span>  <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p>zipper rejects multi-length lists</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">zipper</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt><a href="#id35"><span class="problematic" id="id36">*</span></a>values<span class="classifier">lists </span></dt><dd><p>values to be zipped</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>zipped values</p>
</dd></dl>

</div>
<div class="section" id="reducer">
<h3>reducer<a class="headerlink" href="#reducer" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._reducer.reducer">
<code class="sig-prename descclassname">pyg.base._reducer.</code><code class="sig-name descname">reducer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">sequence</span></em>, <em class="sig-param"><span class="n">default</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._reducer.reducer" title="Permalink to this definition">¶</a></dt>
<dd><p>reduce adds stuff to zero by defaults. This is not needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>binary function.</p>
</dd>
<dt>sequence<span class="classifier">iterable</span></dt><dd><p>list of inputs to be applied iteratively to reduce.</p>
</dd>
<dt>default<span class="classifier">TYPE, optional</span></dt><dd><p>A default value to be returned with an empty sequence</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">add</span><span class="p">,</span> <span class="n">mul</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">reduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">mul</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducer</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[])</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">reduce</span><span class="p">(</span><span class="n">add</span><span class="p">,</span> <span class="p">[])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="reducing">
<h3>reducing<a class="headerlink" href="#reducing" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="pyg.base._reducer.reducing">
<em class="property">class </em><code class="sig-prename descclassname">pyg.base._reducer.</code><code class="sig-name descname">reducing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._reducer.reducing" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a bivariate-function being able to act on a sequence of elements using reduction</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">mul</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="n">mul</span><span class="p">)([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">24</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="n">mul</span><span class="p">)(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">24</span>    
</pre></div>
</div>
<p>Since a.join(b).join(c).join(d) is also very common, we provide a simple interface for that:</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p>chaining</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="s1">&#39;__add__&#39;</span><span class="p">)([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">reducing</span><span class="p">(</span><span class="s1">&#39;__add__&#39;</span><span class="p">)(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span>
</pre></div>
</div>
<p>d = dictable(a = [1,2,3,5,4])
reducing(‘inc’)(d, dict(a=1))</p>
</dd></dl>

</div>
<div class="section" id="logger-and-get-logger">
<h3>logger and get_logger<a class="headerlink" href="#logger-and-get-logger" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="pyg.base._logger.get_logger">
<code class="sig-prename descclassname">pyg.base._logger.</code><code class="sig-name descname">get_logger</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">'pyg'</span></em>, <em class="sig-param"><span class="n">level</span><span class="o">=</span><span class="default_value">'info'</span></em>, <em class="sig-param"><span class="n">fmt</span><span class="o">=</span><span class="default_value">'%(asctime)s - %(name)s - %(levelname)s - %(message)s'</span></em>, <em class="sig-param"><span class="n">file</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">console</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._logger.get_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>quick utility to simplify loggers creation and ensure we cache them and do not add to many handlers</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>name<span class="classifier">str, optional</span></dt><dd><p>name of logger. The default is ‘pyg’.</p>
</dd>
<dt>level<span class="classifier">str, optional</span></dt><dd><p>DEBUG/INFO/WARN etc. The default is ‘info’.</p>
</dd>
<dt>fmt<span class="classifier">str, optional</span></dt><dd><p>string formatting for messages. The default is ‘%(asctime)s - %(name)s - %(levelname)s - %(message)s’.</p>
</dd>
<dt>file<span class="classifier">bool/str, optional</span></dt><dd><p>the name of the file to log to. The default is False = do not log to file.</p>
</dd>
<dt>console<span class="classifier">bool, optional</span></dt><dd><p>log to console? The default is True.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>logging.logger</p>
</dd></dl>

</div>
<div class="section" id="access-functions">
<h3>access functions<a class="headerlink" href="#access-functions" title="Permalink to this headline">¶</a></h3>
<p>These are useful to convert object-oriented code to declarative functions</p>
<span class="target" id="module-pyg.base._getitem"></span><dl class="py function">
<dt id="pyg.base._getitem.callattr">
<code class="sig-prename descclassname">pyg.base._getitem.</code><code class="sig-name descname">callattr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">attr</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._getitem.callattr" title="Permalink to this definition">¶</a></dt>
<dd><p>gets the attribute(s) from a value and calls its</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">value</span> <span class="o">=</span> <span class="n">Dict</span><span class="p">(</span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">callattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">callattr</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">attr</span> <span class="o">=</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1000</span><span class="p">))</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ts</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="o">==</span> <span class="n">callattr</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="s1">&#39;std&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">eq</span><span class="p">(</span><span class="n">ts</span><span class="o">.</span><span class="n">ewm</span><span class="p">(</span><span class="n">com</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">callattr</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ewm&#39;</span><span class="p">,</span><span class="s1">&#39;mean&#39;</span><span class="p">],</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">[{</span><span class="s1">&#39;com&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="p">{}]))</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">dictable</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abcdef&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">callattr</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;inc&#39;</span><span class="p">,</span> <span class="s1">&#39;exc&#39;</span><span class="p">],</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">[</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)])</span> <span class="o">==</span> <span class="n">d</span><span class="o">.</span><span class="n">inc</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">exc</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="s1">&#39;f&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="simple">
<dt>value<span class="classifier">obj</span></dt><dd><p>object that contrains an item.</p>
</dd>
<dt>attr<span class="classifier">string(s)</span></dt><dd><p>key within object.</p>
</dd>
<dt>args<span class="classifier">tuple, optional</span></dt><dd><p>tuple of values to be fed to function. The default is None.</p>
</dd>
<dt>kwargs<span class="classifier">dict, optional</span></dt><dd><p>kwargs to be fed to the method. The default is None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._getitem.callitem">
<code class="sig-prename descclassname">pyg.base._getitem.</code><code class="sig-name descname">callitem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="n">args</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._getitem.callitem" title="Permalink to this definition">¶</a></dt>
<dd><p>gets an item and calls it</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">callitem</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">callitem</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="s1">&#39;function&#39;</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<dl class="simple">
<dt>value<span class="classifier">obj</span></dt><dd><p>object that contrains an item.</p>
</dd>
<dt>key<span class="classifier">string</span></dt><dd><p>key within object.</p>
</dd>
<dt>args<span class="classifier">tuple, optional</span></dt><dd><p>tuple of values to be fed to function. The default is None.</p>
</dd>
<dt>kwargs<span class="classifier">dict, optional</span></dt><dd><p>kwargs to be fed to the method. The default is None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._getitem.getitem">
<code class="sig-prename descclassname">pyg.base._getitem.</code><code class="sig-name descname">getitem</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">key</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">default</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._getitem.getitem" title="Permalink to this definition">¶</a></dt>
<dd><p>gets an item, like getattr</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getitem</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getitem</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">getitem</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">)</span> 
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="inspection">
<h3>inspection<a class="headerlink" href="#inspection" title="Permalink to this headline">¶</a></h3>
<p>There are a few functions extending the inspect module.</p>
<span class="target" id="module-pyg.base._inspect"></span><dl class="py function">
<dt id="pyg.base._inspect.argspec_add">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">argspec_add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">fullargspec</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">update</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.argspec_add" title="Permalink to this definition">¶</a></dt>
<dd><p>adds new args with default values at the end of the existing args</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>fullargspec<span class="classifier">FullArgSpec</span></dt><dd><p>DESCRIPTION.</p>
</dd>
<dt><a href="#id37"><span class="problematic" id="id38">**</span></a>update<span class="classifier">dict</span></dt><dd><p>parameter names with their default values.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>FullArgSpec</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">b</span> <span class="p">:</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">argspec</span> <span class="o">=</span> <span class="n">getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated</span> <span class="o">=</span> <span class="n">argspec_add</span><span class="p">(</span><span class="n">argspec</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">updated</span><span class="o">.</span><span class="n">args</span> <span class="o">==</span> <span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;axis&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="n">updated</span><span class="o">.</span><span class="n">defaults</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">b</span><span class="p">,</span> <span class="n">axis</span> <span class="p">:</span> <span class="kc">None</span> <span class="c1">## axis already exists without a default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">argspec</span> <span class="o">=</span> <span class="n">getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated</span> <span class="o">=</span> <span class="n">argspec_add</span><span class="p">(</span><span class="n">argspec</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">updated</span> <span class="o">==</span> <span class="n">argspec</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">b</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span><span class="mi">1</span> <span class="p">:</span> <span class="kc">None</span> <span class="c1">## axis already exists with a different default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">argspec</span> <span class="o">=</span> <span class="n">getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated</span> <span class="o">=</span> <span class="n">argspec_add</span><span class="p">(</span><span class="n">argspec</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">updated</span> <span class="o">==</span> <span class="n">argspec</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.argspec_defaults">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">argspec_defaults</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.argspec_defaults" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the function defaults as a dict rather than using the inspect structure</p>
</dd>
<dt class="field-even">Example</dt>
<dd class="field-even"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">argspec_defaults</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">argspec_defaults</span><span class="p">(</span><span class="n">g</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>function : callable</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>defaults as a dict.</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.argspec_required">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">argspec_required</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.argspec_required" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>function : callable</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>list</dt><dd><p>parameters that <em>must</em> be provided in order to run the function</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.argspec_update">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">argspec_update</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">argspec</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.argspec_update" title="Permalink to this definition">¶</a></dt>
<dd><p>generic function to create new FullArgSpec (python 3) or normal ArgSpec (python 2)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>argspec<span class="classifier">FullArgSpec</span></dt><dd><p>The argspec of the dunction</p>
</dd>
<dt><a href="#id39"><span class="problematic" id="id40">**</span></a>kwargs<span class="classifier">TYPE</span></dt><dd><p>updates</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>FullArgSpec</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span><span class="mi">1</span> <span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">argspec</span> <span class="o">=</span> <span class="n">getargspec</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">argspec_update</span><span class="p">(</span><span class="n">argspec</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">FullArgSpec</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s1">&#39;annotations&#39;</span><span class="p">:</span> <span class="p">{},</span>
<span class="go">                                                                             &#39;args&#39;: [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;],</span>
<span class="go">                                                                             &#39;defaults&#39;: (1,),</span>
<span class="go">                                                                             &#39;kwonlyargs&#39;: [],</span>
<span class="go">                                                                             &#39;kwonlydefaults&#39;: None,</span>
<span class="go">                                                                             &#39;varargs&#39;: None,</span>
<span class="go">                                                                             &#39;varkw&#39;: None})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.call_with_callargs">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">call_with_callargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">callargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.call_with_callargs" title="Permalink to this definition">¶</a></dt>
<dd><p>replicates inspect.getcallargs with support to functions within decorators</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="mi">1</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span><span class="o">+</span><span class="mi">10</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">26</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">callargs</span> <span class="o">=</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">call_with_callargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="n">callargs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">26</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.getargs">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">getargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">n</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.getargs" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>The function for  which we want the args</p>
</dd>
<dt>n<span class="classifier">int optional</span></dt><dd><p>get the name opf the args after allowing for n args to be set by <a href="#id41"><span class="problematic" id="id42">*</span></a>args. 
The default is 0.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>None or a list of args</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.getargspec">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">getargspec</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.getargspec" title="Permalink to this definition">¶</a></dt>
<dd><p>Extends inspect.getfullargspec to allow us to decorate functions with a signature.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>function<span class="classifier">callable</span></dt><dd><p>function for which we want to know argspec.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>inspect.FullArgSpec</p>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.getcallargs">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">getcallargs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.getcallargs" title="Permalink to this definition">¶</a></dt>
<dd><p>replicates inspect.getcallargs with support to functions within decorators</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyg</span> <span class="kn">import</span> <span class="o">*</span><span class="p">;</span> <span class="kn">import</span> <span class="nn">inspect</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="o">*</span><span class="n">myargs</span><span class="p">,</span> <span class="o">**</span><span class="n">mykwargs</span><span class="p">:</span> <span class="mi">1</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">);</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">c</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;myargs&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;mykwargs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">}}</span> 
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">();</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">function</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">();</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">();</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,);</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">args</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,);</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getcallargs</span><span class="p">(</span><span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">==</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="pyg.base._inspect.kwargs2args">
<code class="sig-prename descclassname">pyg.base._inspect.</code><code class="sig-name descname">kwargs2args</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">function</span></em>, <em class="sig-param"><span class="n">args</span></em>, <em class="sig-param"><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#pyg.base._inspect.kwargs2args" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a list of paramters that were provided as kwargs, into args</p>
<dl class="field-list simple">
<dt class="field-odd">Example</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">kwargs2args</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="p">,</span> <span class="p">(),</span> <span class="nb">dict</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span> <span class="o">==</span> <span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">{})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<p>function : callable
args : tuple</p>
<blockquote>
<div><p>parameters of function.</p>
</div></blockquote>
<dl class="simple">
<dt>kwargs<span class="classifier">dict</span></dt><dd><p>key-word parameters of function.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<dl class="simple">
<dt>tuple</dt><dd><p>a pair of a function args, kwargs.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">pyg</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pyg.base</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extensions-to-dict">extensions to dict</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dictattr">dictattr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ulist">ulist</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dict">Dict</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dictable">dictable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#perdictable">perdictable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#join">join</a></li>
<li class="toctree-l3"><a class="reference internal" href="#named-dict">named_dict</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#decorators">decorators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wrapper">wrapper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timer">timer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#try-value">try_value</a></li>
<li class="toctree-l3"><a class="reference internal" href="#try-back">try_back</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loops">loops</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loop">loop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kwargs-support">kwargs_support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#graphs-cells">graphs &amp; cells</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cell">cell</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-go">cell_go</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-item">cell_item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cell-func">cell_func</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#encode-and-decode-save-and-load">encode and decode/save and load</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#encode">encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decode">decode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-to-parquet">pd_to_parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pd-read-parquet">pd_read_parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parquet-encode">parquet_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#csv-encode">csv_encode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#convertors-to-bytes">convertors to bytes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#dates-and-calendar">dates and calendar</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dt">dt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ymd">ymd</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dt-bump">dt_bump</a></li>
<li class="toctree-l3"><a class="reference internal" href="#drange">drange</a></li>
<li class="toctree-l3"><a class="reference internal" href="#date-range">date_range</a></li>
<li class="toctree-l3"><a class="reference internal" href="#calendar">Calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">calendar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#as-time">as_time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clock">clock</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#text-manipulation">text manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lower">lower</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upper">upper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#proper">proper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capitalize">capitalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="#strip">strip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#split">split</a></li>
<li class="toctree-l3"><a class="reference internal" href="#replace">replace</a></li>
<li class="toctree-l3"><a class="reference internal" href="#common-prefix">common_prefix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#files-directory">files &amp; directory</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mkdir">mkdir</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-csv">read_csv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tree-manipulation">tree manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tree-to-items">tree_to_items</a></li>
<li class="toctree-l3"><a class="reference internal" href="#items-to-tree">items_to_tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tree-update">tree_update</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tree-to-table">tree_to_table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tree-repr">tree_repr</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#list-functions">list functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#as-list">as_list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#as-tuple">as_tuple</a></li>
<li class="toctree-l3"><a class="reference internal" href="#first">first</a></li>
<li class="toctree-l3"><a class="reference internal" href="#last">last</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unique">unique</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#comparing-and-sorting">Comparing and Sorting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cmp">cmp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">Cmp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sort">sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="#eq">eq</a></li>
<li class="toctree-l3"><a class="reference internal" href="#in">in</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bits-and-pieces">bits and pieces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-pyg.base._types">type functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#zipper">zipper</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reducer">reducer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reducing">reducing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#logger-and-get-logger">logger and get_logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#access-functions">access functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#inspection">inspection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mongo.html">pyg.mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="timeseries.html">pyg.timeseries</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_dict.html">pyg.base.Dict</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_dictable.html">pyg.base.dictable</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_mongo.html">pyg.mongo</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_cell.html">pyg.base.cell</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_perdictable.html">pyg.base.join</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_timeseries.html">pyg.timeseries</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_ts_decorators.html">pyg.timeseries decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="lab/tutorial_ts_ewma_time.html">pyg.timeseries.ewma</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to pyg!</a></li>
      <li>Next: <a href="mongo.html" title="next chapter">pyg.mongo</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Yoav Git.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.4.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/base.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>